// JavaScript Document
function AnimationHelper(a){this.animate=Item.prototype.animate;for(var b in a)this[b]=a[b]}var AnimationManager=function(){AnimationManager.animationAnimations=[],AnimationManager.interactionAnimations=[]};AnimationManager.Animation=function(a,b){this.item=a,this.style=b.style,this.duration=b.duration,b.delay?this.startTime=(new Date).getTime()+b.delay:this.startTime=(new Date).getTime(),b.animationType?(this.animationType=b.animationType,this.animationType=="custom"&&(this.mappingFunction=b.mappingFunction)):this.animationType="linear",typeof b.callback=="function"&&(this.callback=b.callback),typeof b.update=="function"&&(this.update=b.update),this.idle=!0,this.map=function(a){return this.animationType=="linear"?a:this.animationType=="easeIn"?a*a:this.animationType=="easeOut"?a*(-a+2):this.animationType=="easeInEaseOut"?a*a*(3-2*a):this.animationType=="custom"?this.mappingFunction(a):a}},AnimationManager.animate=function(a){paper.project==Main.animationProject?AnimationManager.animationAnimations.push(a):paper.project==Main.interactionProject&&AnimationManager.interactionAnimations.push(a)},AnimationManager.clearAnimations=function(){paper.project==Main.animationProject?AnimationManager.animationAnimations=[]:paper.project==Main.interactionProject&&(AnimationManager.interactionAnimations=[])},AnimationManager.update=function(a){var b;paper.project==Main.animationProject?b=AnimationManager.animationAnimations:paper.project==Main.interactionProject&&(b=AnimationManager.interactionAnimations);for(var c=0;c<b.length;c++){var d=b[c];currentTime=(new Date).getTime();if(d.startTime<currentTime)if(d.idle){d.startHash={},d.endHash={};for(var e in d.style)d.style.hasOwnProperty(e)&&(d.startHash[e]=d.item[e]);d.idle=!1}else if(d.startTime+d.duration<currentTime){b.splice(c,1);for(var e in d.startHash)d.startHash.hasOwnProperty(e)&&(d.item[e]=d.style[e]);d.update&&(d.item.update=d.update,d.item.update()),d.callback&&(d.item.callback=d.callback,d.item.callback())}else{for(var e in d.startHash)if(d.startHash.hasOwnProperty(e)){var f=d.startHash[e],g=d.style[e],h=d.map((currentTime-d.startTime)/d.duration);if(Util.isNumber(f))d.item[e]=f+(g-f)*h;else if(f instanceof Point){var i=f.x+(g.x-f.x)*h,j=f.y+(g.y-f.y)*h;d.item[e]=new Point(i,j)}else if(f instanceof RgbColor){var k=f.red+(g.red-f.red)*h,l=f.green+(g.green-f.green)*h,m=f.blue+(g.blue-f.blue)*h,n=f.alpha+(g.alpha-f.alpha)*h;d.item[e]=new RgbColor(k,l,m,n)}}d.update&&(d.item.update=d.update,d.item.update())}}};