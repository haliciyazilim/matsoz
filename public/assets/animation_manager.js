// JavaScript Document
var AnimationManager=function(){AnimationManager.animationAnimations=[],AnimationManager.interactionAnimations=[]};AnimationManager.Animation=function(a,b){this.item=a,this.style=b.style,this.duration=b.duration,b.delay?this.startTime=(new Date).getTime()+b.delay:this.startTime=(new Date).getTime(),b.animationType?(this.animationType=b.animationType,this.animationType=="custom"&&(this.mappingFunction=b.mappingFunction)):this.animationType="linear",typeof b.callback=="function"&&(this.item.callback=b.callback),this.idle=!0,this.map=function(a){return this.animationType=="linear"?a:this.animationType=="easeIn"?a*a:this.animationType=="easeOut"?a*(-a+2):this.animationType=="easeInEaseOut"?a*a*(3-2*a):this.animationType=="custom"?this.mappingFunction(a):a}},AnimationManager.animate=function(a){paper.project==Main.animationProject?AnimationManager.animationAnimations.push(a):paper.project==Main.interactionProject&&AnimationManager.interactionAnimations.push(a)},AnimationManager.clearAnimations=function(){paper.project==Main.animationProject?AnimationManager.animationAnimations=[]:paper.project==Main.interactionProject&&(AnimationManager.interactionAnimations=[])},AnimationManager.update=function(a){var b;paper.project==Main.animationProject?b=AnimationManager.animationAnimations:paper.project==Main.interactionProject&&(b=AnimationManager.interactionAnimations);for(var c=0;c<b.length;c++){var d=b[c];currentTime=(new Date).getTime();if(d.startTime<currentTime)if(d.idle){d.startHash={},d.endHash={};for(var e in d.style)d.style.hasOwnProperty(e)&&(d.startHash[e]=d.item[e]);d.idle=!1}else if(d.startTime+d.duration<currentTime)for(var e in d.startHash)d.startHash.hasOwnProperty(e)&&(d.item[e]=d.style[e],b.splice(c,1),d.item.callback&&d.item.callback());else for(var e in d.startHash)d.startHash.hasOwnProperty(e)&&(startValue=d.startHash[e],endValue=d.style[e],ratio=d.map((currentTime-d.startTime)/d.duration),Util.isNumber(startValue)?d.item[e]=startValue+(endValue-startValue)*ratio:startValue instanceof Point&&(x=startValue.x+(endValue.x-startValue.x)*ratio,y=startValue.y+(endValue.y-startValue.y)*ratio,d.item[e]=new Point(x,y)))}};