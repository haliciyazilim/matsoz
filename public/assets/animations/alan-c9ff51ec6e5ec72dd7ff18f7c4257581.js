// JavaScript Document
/*Styles*/
function square(a,b,c){var d,e,f;f=Math.min(c.width,c.height)*.6,d=(c.width-f)*.5,e=(c.height-f)*.5,c.rect(d,e,f,f).attr(edgeStyle),c.text(d+f*.5,e+f*1.1,""+a+" "+b).attr(textStyle),c.text(d+f*1.15,e+f*.5,""+a+" "+b).attr(textStyle),c.text(d-10,e+f+10,TestGenerator.letters.shift()).attr(textStyle),c.text(d+f+10,e+f+10,TestGenerator.letters.shift()).attr(textStyle),c.text(d+f+10,e-10,TestGenerator.letters.shift()).attr(textStyle),c.text(d-10,e-10,TestGenerator.letters.shift()).attr(textStyle)}function rectangle(a,b,c,d){var e,f,g,h,i;a>b?(i=d.width*.6,g=i,h=i*(b/a)):(i=d.height*.6,g=i*(a/b),h=i),e=(d.width-g)*.5,f=(d.width-h)*.5,console.log([e,f,g,h,i]),d.rect(e,f,g,h).attr(edgeStyle),d.text(e+g*.5,f+10+h,""+a+" "+c).attr(textStyle),d.text(e+25+g,f+h*.5,""+b+" "+c).attr(textStyle),d.text(e-10,f+h+10,TestGenerator.letters.shift()).attr(textStyle),d.text(e+g+10,f+h+10,TestGenerator.letters.shift()).attr(textStyle),d.text(e+g+10,f-10,TestGenerator.letters.shift()).attr(textStyle),d.text(e-10,f-10,TestGenerator.letters.shift()).attr(textStyle)}function rhomboid(a,b,c,d,e){var f,g,h,i,j,k;2*a+b>c?(k=e.width*.8,h=k*((a+b)/(2*a+b)),i=k*a/(2*a+b),j=k*(c/(2*a+b))):(k=e.height*.8,h=k*((a+b)/c),i=k*a/c,j=k),f=(e.width-(h+i))*.5,g=(e.width-j)*.5,console.log([a,b,c]),console.log([i,h,j]),e.rhomboid(f,g,i,h,j).attr(edgeStyle),e.line(f+i,g,f+i,g+j).attr(edgeStyle),e.text(f+h*.5,g+10+j,""+(a+b)+" "+d).attr(textStyle),e.text(f+25+i,g+j*.5,""+c+" "+d).attr(textStyle),e.rect(f+i-10,g+j-10,10,10).attr(edgeStyle),e.circle(f+i-5,g+j-5,1).attr(edgeStyle),e.text(f-10,g+j+10,TestGenerator.letters.shift()).attr(textStyle),e.text(f+h+10,g+j+10,TestGenerator.letters.shift()).attr(textStyle),e.text(f+h+i+10,g-10,TestGenerator.letters.shift()).attr(textStyle),e.text(f+i-10,g-10,TestGenerator.letters.shift()).attr(textStyle),e.text(f+i-16,g+j-16,TestGenerator.letters.shift()).attr(textStyle)}function triangle(a,b,c,d,e){var f,g,h,i,j,k;a+b>c?(k=e.width*.8,h=k,i=k*a/(a+b),j=k*(c/(a+b))):(k=e.height*.8,h=k*((a+b)/c),i=k*a/c,j=k),f=(e.width-h)*.5,g=(e.width-j)*.5,console.log([a,b,c]),console.log([i,h,j]),e.triangle(f,g+j,f+h,g+j,f+i,g).attr(edgeStyle),e.line(f+i,g,f+i,g+j).attr(edgeStyle),e.text(f+h*.5,g+10+j,""+(a+b)+" "+d).attr(textStyle),e.text(f+25+i,g+j*.7,""+c+" "+d).attr(textStyle),e.rect(f+i-10,g+j-10,10,10).attr(edgeStyle),e.circle(f+i-5,g+j-5,1).attr(edgeStyle),e.text(f-10,g+j+10,TestGenerator.letters.shift()).attr(textStyle),e.text(f+h+10,g+j+10,TestGenerator.letters.shift()).attr(textStyle),e.text(f+i+10,g-10,TestGenerator.letters.shift()).attr(textStyle),e.text(f+i-16,g+j-16,TestGenerator.letters.shift()).attr(textStyle)}var textStyle={"font-size":"16px"},edgeStyle={"stroke-width":"2px"},angleStyle={fill:"#DDD"},Interaction=function(){};Interaction(),Interaction.init=function(a){Main.setObjective("Aşağıdaki geometrik şekillerin alanlarını bulunuz ve “Kontrol” düğmesine fare ile tıklayarak  ya da “Enter” tuşuna basarak kontrol ediniz."),Interaction.container=a,Interaction.container.innerHTML='<div id="L"></div><div id="R"></div>',Interaction.L=$("div#L",Interaction.container).get(0),Interaction.R=$("div#R",Interaction.container).get(0),$(Interaction.container).append("<style>div#L,div#R{float:left;}</style>"),$(Interaction.container).append("<style>div#L{width:60%;height:100%;text-align:center;}</style>"),$(Interaction.container).append("<style>div#R{width:40%;height:100%;}</style>"),$(Interaction.container).append("<style>div#R > div#T{box-sizing:border-box;padding-top:40%;}</style>"),$(Interaction.container).append("<style>div#R > div#B{box-sizing:border-box;text-align:right;padding-right:25%;padding-top:10%;}</style>"),$(Interaction.R).append('<div id="T"></div><div id="B"></div>'),Interaction.paper=new Raphael(Interaction.L,$(Interaction.L).width()*.8,$(Interaction.R).height()*.8),Interaction.input=document.createElement("input"),Interaction.input.className="number_input_field",Interaction.input.setAttribute("type","text"),Interaction.input.setAttribute("maxlength","3"),Interaction.input.onkeyup=function(a){console.log(a.keyCode),a.keyCode==13&&TestGenerator.checkAnswer()},$("div#T",Interaction.R).append("A =&nbsp;"),$("div#T",Interaction.R).append(Interaction.input),$("div#T",Interaction.R).append('&nbsp;<span id="input_measure"></span>²'),Interaction.button=document.createElement("input"),Interaction.button.setAttribute("type","button"),Interaction.button.value="Kontrol",Interaction.button.onclick=TestGenerator.checkAnswer,Interaction.button.className="control_button",$("div#B",Interaction.R).append(Interaction.button),$("div#B",Interaction.R).append('<div id="status"></div>'),Interaction.status=$("div#B > div#status",Interaction.R).get(0),Interaction.status.style.fontSize="12px",Interaction.status.style.fontWeight="bold",Interaction.status.style.paddingTop="10px",TestGenerator(Interaction.paper)},Interaction.setStatus=function(a){Interaction.status.innerHTML=a};var TestGenerator=function(a){TestGenerator.paper=a,TestGenerator.nextQuestion()};TestGenerator.nextQuestion=function(){TestGenerator.shape=null,TestGenerator.trial=0,TestGenerator.values=null,TestGenerator.paper.clear(),Interaction.setStatus(""),Interaction.button.value="Kontrol",Interaction.input.value="",Interaction.input.style.color="",Interaction.button.onclick=TestGenerator.checkAnswer,TestGenerator.shape=Math.floor(Math.random()*4);var a=Math.floor(Math.random()*2);TestGenerator.setMeasure(a),TestGenerator.letters=Math.random()>.5?["A","B","C","D","E"]:["X","Y","Z","W","Q"];switch(TestGenerator.shape){case 0:var b=Math.floor(Math.random()*10)+5,c=b*b;TestGenerator.values={a:b,area:c},square(b,TestGenerator.getMeasure(),TestGenerator.paper);break;case 1:var b,d;b=Math.floor(Math.random()*10)+5,d=b;while(b==d)d=Math.floor(Math.random()*10)+5;TestGenerator.values={a:b,b:d,area:b*d},rectangle(b,d,TestGenerator.getMeasure(),TestGenerator.paper);break;case 2:var b,d,e;b=Math.floor(Math.random()*5)+5,d=b;while(b==d)d=Math.floor(Math.random()*5)+5;e=Math.floor(Math.random()*5)+5,TestGenerator.values={a:b,b:d,H:e,area:(b+d)*e},rhomboid(b,d,e,TestGenerator.getMeasure(),TestGenerator.paper);break;case 3:var b,d,e;b=Math.floor(Math.random()*5)+5,d=b;while(b==d)d=Math.floor(Math.random()*5)+5;e=Math.floor(Math.random()*5)+5,TestGenerator.values={a:b,b:d,H:e,area:(b+d)*e*.5},triangle(b,d,e,TestGenerator.getMeasure(),TestGenerator.paper)}},TestGenerator.setMeasure=function(a){TestGenerator.measure=a,$("#input_measure").html(TestGenerator.getMeasure())},TestGenerator.getMeasure=function(){if(TestGenerator.measure==null||TestGenerator.measure=="undefined")throw"TestGenerator.values.m is not defined";return TestGenerator.measure==0?"cm":"m"},TestGenerator.checkAnswer=function(){console.log("Im here");var a=Interaction.input.value,b=!1;isNaN(a)?(b=!0,Interaction.setStatus("Lütfen sayı giriniz.")):a==TestGenerator.values.area?(Interaction.setStatus("Tebrikler !"),Interaction.button.onclick=TestGenerator.nextQuestion,Interaction.button.value="Sonraki"):(Interaction.setStatus("Tekrar deneyiniz. "),b=!0),b&&TestGenerator.trial>0?(Interaction.input.style.color="red",Interaction.input.value=TestGenerator.values.area,Interaction.setStatus("Yanlış. Doğru cevap: "+TestGenerator.values.area+" "+TestGenerator.getMeasure()),Interaction.button.onclick=TestGenerator.nextQuestion,Interaction.button.value="Sonraki"):(Interaction.button.onlick=TestGenerator.nextQuestion,TestGenerator.trial++,TestGenerator.trial++)};