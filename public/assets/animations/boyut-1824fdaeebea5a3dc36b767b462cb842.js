/*Styles*/
var textStyle={strokeColor:"#000",fillColor:"#000"},edgeStyle={strokeColor:"#000",fillColor:"#fff"},twoDimensionalShapeStyle={strokeColor:"#000",fillColor:"#ccc",strokeWidth:2},oneDimensionalShapeStyle={strokeColor:"#000",fillColor:"#fff",strokeWidth:2},threeDimensionalShapeStyle={strokeColor:"#000",fillColor:"#ccc",strokeWidth:2},dashedLineStyle={strokeColor:"#000"},bowlHoverStyle={strokeColor:"#000",fillColor:"#ff9",strokeWidth:2},bowlDroppedTrueStyle={strokeColor:"#0f0",fillColor:"#afa"},bowlDroppedFalseStyle={strokeColor:"#f00",fillColor:"#faa"},bowlDefaultStyle={fillColor:"#fff",strokeColor:"#000",strokeWidth:2},Animation={};Animation.init=function(a){Animation.container=a;var b=$(a).width(),c=$(a).height(),d=Math.min(b,c)*.3,e=d*.4,f=d*.6;x=b*.5-10,y=c*.5,console.log(x,y);var g=new Point(x-d,y+d),h=new Point(x+d,y+d),i=new Point(x+d,y-d),j=new Point(x-d,y-d),k=new Point(x-d+f,y-d-e),l=new Point(k.x+2*d,k.y),m=new Point(l.x,l.y+2*d);Animation.path=new Path,Animation.path.setStyle({strokeColor:"#000",strokeWidth:2}),Animation.line1=new Path.Line(g,j),Animation.line3=new Path.Line(h,m),Animation.line2=new Path.Line(g,h),Animation.text1=new PointText(new Point(g.x-20,(g.y+j.y)*.5)),Animation.text2=new PointText(new Point((g.x+h.x)*.5,g.y+20)),Animation.text3=new PointText(new Point((m.x+h.x)*.5+10,(m.y+h.y)*.5+10)),Animation.text1.content="1",Animation.text2.content="2",Animation.text3.content="3";var n={count:0,opacity:0,line1Opacity:0,line2Opacity:0,line3Opacity:0,text1Opacity:0,text2Opacity:0,text3Opacity:0},o={strokeWidth:3,strokeColor:"#f00"},p={fillColor:"#f00",strokeColor:"#f00"};Animation.text1.setStyle(p),Animation.text2.setStyle(p),Animation.text3.setStyle(p),Animation.path.add(j),Animation.path.add(g),Animation.path.add(h),Animation.path.add(i),Animation.path.add(j),Animation.path.add(k),Animation.path.add(l),Animation.path.add(m),Animation.path.add(h),Animation.path.add(i),Animation.path.add(l),Animation.line1.setStyle(o),Animation.line3.setStyle(o),Animation.line2.setStyle(o),Animation.line1.strokeColor="#f00",Animation.line3.strokeColor="#0f0",Animation.line2.strokeColor="#00f",n.animate=Item.prototype.animate,Animation.onFrame=function(){Animation.path.opacity=n.opacity,Animation.line1.opacity=n.line1Opacity,Animation.line3.opacity=n.line3Opacity,Animation.line2.opacity=n.line2Opacity,Animation.text1.opacity=n.text1Opacity,Animation.text3.opacity=n.text3Opacity,Animation.text2.opacity=n.text2Opacity;if(n.text3Opacity==1){Animation.onFrame=null,console.log("asdasd");var a=document.createElement("div");$(Animation.container).append(a),$(a).html('<span style="color:#f00">1.&emsp;Boy</span><br/><span style="color:#00f">2.&emsp;En</span><br/><span style="color:#0f0">3.&emsp;Derinlik</span>').css({position:"absolute",left:"50%",marginLeft:"100px",opacity:0,top:"50%",marginTop:"-50px",lineHeight:"33px"}).animate({opacity:1},1e3)}},n.animate({style:{opacity:1},duration:2e3}),n.animate({style:{line1Opacity:1},duration:1e3,delay:2e3}),n.animate({style:{line2Opacity:1},duration:1e3,delay:3e3}),n.animate({style:{line3Opacity:1},duration:1e3,delay:4e3}),n.animate({style:{text1Opacity:1},duration:1e3,delay:5e3}),n.animate({style:{text2Opacity:1},duration:1e3,delay:6e3}),n.animate({style:{text3Opacity:1},duration:1e3,delay:7e3})};var Interaction={};Interaction.getFramework=function(){return"paper"},Interaction.init=function(a){Main.setObjective("Yandaki nesneleri kaç boyutlu olduğuna göre sınıflandırmak için fare ile sürükleyerek ilgili sepete atınız."),Interaction.container=a,Interaction.container.top=$(a).offset().top,Interaction.container.left=$(a).offset().left,Interaction.paper={width:$(a).width(),height:$(a).height()};var b=Interaction.paper.width,c=Interaction.paper.height;oneDimensionalShapeStyle.fillColor=new RgbColor(255,255,255,0),threeDimensionalShapeStyle.fillColor=new RgbColor(.8,.8,.8,.8),Interaction.shapeCount=1,Interaction.generateBowls(b,c),Interaction.nextQuestion();var d=new Tool;d.setHitTestOptions({fill:!0,stroke:!0,segments:!0,tolerance:15}),d.onMouseDown=function(a){a.item&&(d.shape=a.item,a.item.start())},d.onMouseDrag=function(a){d.shape&&d.shape.move(a.delta.x,a.delta.y,a.point.x,a.point.y)},d.onMouseUp=function(a){d.shape&&d.shape.up(),d.shape=null},d.activate()},Interaction.setStatus=function(a){Interaction.status.innerHTML=a},Interaction.nextQuestion=function(){Interaction.shape&&Interaction.shape.remove(),Interaction.shapeCount++,Interaction.preventDrag=!1;var a=Interaction.paper.width,b=Interaction.paper.height;Interaction.generateRandomShape(.4*a,.19*b,.2*a,.22*b);var c=function(){if(Interaction.preventDrag)return;this.ox=this.position.x,this.oy=this.position.y,this.odx=0,this.ody=0;var a=$(Interaction.container).offset();this.s_left=a.left,this.s_top=a.top,this.inDropableShape=!1;if(this.preventDrag==null||this.preventDrag==undefined)this.preventDrag=!1;return Interaction.droppedBowl=undefined,!0},d=function(a,b,c,d){if(Interaction.preventDrag)return;this.odx+=a,this.ody+=b,this.position=[this.position.x+a,this.position.y+b];var e=project.activeLayer.hitTest([c,d],{fill:!0,stroke:!0,segments:!0,tolerance:2,"class":"bowl"});for(var f in Interaction.dim)Interaction.dim[f].style=bowlDefaultStyle;Interaction.droppedBowl=null,e&&(Interaction.droppedBowl=e.item,Interaction.droppedBowl.style=bowlHoverStyle)},e=function(){if(Interaction.preventDrag)return;if(Interaction.droppedBowl!=null&&Interaction.droppedBowl!=undefined&&Interaction.shape.dimension==Interaction.droppedBowl.dimension)Interaction.preventDrag=!0,Interaction.shape.scaleRatio=.9,Interaction.shape.opacityX=1,Interaction.shape.animate({style:{opacityX:-0.3,scaleRatio:1},duration:500,update:function(){this.opacityX<.7&&(this.opacity=this.opacityX+.3),this.scale(this.scaleRatio)}}),Interaction.droppedBowl.animate({style:bowlDroppedTrueStyle,duration:5,callback:function(){Interaction.droppedBowl.animate({style:bowlDefaultStyle,duration:500,delay:500,callback:function(){Interaction.droppedBowl.style=bowlDefaultStyle,Interaction.nextQuestion()}})}});else{Interaction.preventDrag=!0;var a=function(){Interaction.preventDrag=!1};Interaction.droppedBowl!=null&&Interaction.droppedBowl!=undefined&&Interaction.droppedBowl.animate({style:bowlDroppedFalseStyle,duration:5});var b=Math.sqrt(this.odx*this.odx+this.ody*this.ody),c=1,d=b/c;this.animate({style:{position:new Point(this.ox,this.oy)},duration:d,callback:a})}};Interaction.shape.move=d,Interaction.shape.up=e,Interaction.shape.start=c},Interaction.generateRandomShape=function(a,b,c,d){var e=35;Interaction.shapeCount=Interaction.shapeCount%e;if(Interaction.shuffledArray==null||Interaction.shuffledArray==undefined)Interaction.shuffledArray=Util.getShuffledArray(e);shapeType=Interaction.shuffledArray[Interaction.shapeCount];switch(shapeType){case 0:Interaction.shape=new Path.Circle(new Point(a+c*.5,b+d*.5),5),Interaction.shape.style={fillColor:"#000",strokeColor:"#000"},Interaction.shape.dimension=0;break;case 1:Interaction.shape=new Path.Rectangle(new Point(a+c*.2,b+d*.2),new Size(c*.6,d*.6)),Interaction.shape.dimension=1;break;case 2:var f=Math.min(c,d)*.5;Interaction.shape=new Path.Circle(new Point(a+c*.5,b+d*.5),f),Interaction.shape.dimension=1;break;case 3:var g=Math.min(c,d);Interaction.shape=new Path.Line(new Point(a+c*.2,b+d*.2),new Point(a+c*.8,b+d*.8)),Interaction.shape.dimension=1;break;case 4:Interaction.shape=new Path.OneSidedArrow(new Point(a+c*.1,b+d*.5),new Point(a+c*.8,b+d*.5),10,30),Interaction.shape.dimension=1,Interaction.shape.arrow=!0;break;case 5:Interaction.shape=new Path.Rectangle(new Point(a+c*.2,b+d*.2),new Size(c*.6,d*.6)),Interaction.shape.dimension=2;break;case 6:var f=Math.min(c,d)*.5;Interaction.shape=new Path.Circle(new Point(a+c*.5,b+d*.5),f),Interaction.shape.dimension=2;break;case 7:Interaction.shape=new Path.Rhomboid(new Point(a+c*.2,b+d*.2),new Size(c*.6,b*.6),c*.2),Interaction.shape.dimension=2;break;case 8:Interaction.shape=new Path.Triangle(new Point(a+c*.2,b+d*.8),new Point(a+c*.8,b+d*.8),new Point(a+c*.5,b+d*.2)),Interaction.shape.dimension=2;break;case 9:var f=Math.min(c,d)*.6;Interaction.shape=new Path.RectanglePrisim(new Point(a,b),new Size(f,f),new Size(f*.4,f*.4)),Interaction.shape.dimension=3;break;case 10:var f=Math.min(c,d);Interaction.shape=new Path.Sphere(new Point(a+c*.5,b+d*.5),f*.5),Interaction.shape.dimension=3;break;case 11:Interaction.shape=new Path.Cylinder(new Point(a+c*.2,b+d*.2),new Size(c*.6,d*.6)),Interaction.shape.dimension=3;break;case 12:Interaction.shape=new Path.RegularPolygon(new Point(a,b),new Size(c,d),5,30),Interaction.shape.dimension=2;break;case 13:Interaction.shape=new Path.RegularPolygon(new Point(a,b),new Size(c,d),5,60),Interaction.shape.dimension=1;break;case 14:Interaction.shape=new Path.RegularPolygon(new Point(a,b),new Size(c,d),6,90),Interaction.shape.dimension=2;break;case 15:Interaction.shape=new Path.RegularPolygon(new Point(a,b),new Size(c,d),6,120),Interaction.shape.dimension=1;break;case 16:Interaction.shape=new Path.Trapezoid(new Point(a,b),new Size(c,d),c*.6),Interaction.shape.dimension=1;break;case 17:Interaction.shape=new Path.Trapezoid(new Point(a,b),new Size(c,d),c*.4),Interaction.shape.dimension=2;break;case 18:Interaction.shape=new Path.Pyramid(new Point(a,b),new Size(c,d)),Interaction.shape.dimension=3;break;case 19:Interaction.shape=new Path.Cone(new Point(a+c*.1,b),new Size(c*.8,d)),Interaction.shape.dimension=3;break;case 20:Interaction.shape=new Path.Rhombus(new Point(a+c*.2,b+d*.2),new Size(c*.6,b*.6)),Interaction.shape.dimension=1;break;case 21:Interaction.shape=new Path.Rhombus(new Point(a+c*.2,b+d*.2),new Size(c*.6,b*.6)),Interaction.shape.dimension=2;break;case 22:Interaction.shape=new Path.Rhomboid(new Point(a+c*.2,b+d*.2),new Size(c*.6,b*.6),c*.2),Interaction.shape.dimension=1;break;case 23:var f=Math.min(a,b);Interaction.shape=new Path.SquarePrisim(new Point(a,b),f*.7,f*.4),Interaction.shape.dimension=3;break;case 24:Interaction.shape=new Path.RectanglePrisim(new Point(a,b),new Size(c*.7,d*.7),new Size(c*.3,d*.3)),Interaction.shape.dimension=3;break;case 25:Interaction.shape=new Path.TrianglePrisim(new Point(a,b),new Size(c,d)),Interaction.shape.dimension=3;break;case 26:Interaction.shape=new Path.Triangle(new Point(a+c*.3,b+d*.7),new Point(a+c*.9,b+d*.6),new Point(a+c*.5,b+d*.1)),Interaction.shape.dimension=2;break;case 27:Interaction.shape=new Path.Triangle(new Point(a+c*.3,b+d*.7),new Point(a+c*.9,b+d*.6),new Point(a+c*.5,b+d*.1)),Interaction.shape.dimension=1;break;case 28:Interaction.shape=new Path.Triangle(new Point(a+c*.2,b+d),new Point(a+c,b+d),new Point(a+c,b)),Interaction.shape.dimension=1;break;case 29:Interaction.shape=new Path.Triangle(new Point(a+c*.2,b+d),new Point(a+c,b+d),new Point(a+c*.2,b)),Interaction.shape.dimension=2;break;case 30:Interaction.shape=new Path.Triangle(new Point(a+c*.2,b+d),new Point(a+c*.8,b+d),new Point(a+c,b)),Interaction.shape.dimension=2;break;case 31:var g=Math.min(c,d);Interaction.shape=new Path.Line(new Point(a+c,b),new Point(a,b+d)),Interaction.shape.dimension=1;break;case 32:Interaction.shape=new Path.OneSidedArrow(new Point(a,b),new Point(a+c,b+d*.5),10,30),Interaction.shape.dimension=1,Interaction.shape.arrow=!0;break;case 33:Interaction.shape=new Path.OneSidedArrow(new Point(a+c*.5,b+d),new Point(a+c*.5,b),10,30),Interaction.shape.dimension=1,Interaction.shape.arrow=!0;break;case 34:Interaction.shape=new Path.OneSidedArrow(new Point(a+c*.5,b),new Point(a+c*.5,b+d),10,30),Interaction.shape.dimension=1,Interaction.shape.arrow=!0}if(Interaction.shape.dimension==1)Interaction.shape.setStyle(oneDimensionalShapeStyle);else if(Interaction.shape.dimension==2)Interaction.shape.setStyle(twoDimensionalShapeStyle);else if(Interaction.shape.dimension==3){Interaction.shape.setStyle(threeDimensionalShapeStyle);if(Interaction.shape.children)for(var h=0;h<Interaction.shape.children.length;h++)Interaction.shape.children[h].class=="dashed"&&Interaction.shape.children[h].setStyle(dashedLineStyle)}Interaction.shape.arrow==1&&Interaction.shape.setStyle({fillColor:"#000"})},Interaction.generateBowls=function(a,b){var c=.2*a,d=.22*b,e=[];for(var f=0;f<4;f++){e[f]=new Path.Bowl(new Point(f*.25*a+.025*a,.6*b+.04*b),new Size(c,d)),e[f].style=bowlDefaultStyle,e[f].dimension=f,e[f].class="bowl";var g;f==0?(g=new PointText(new Point(e[f].position.x-c*.3,e[f].position.y)),g.content="Boyutu\nyok"):(g=new PointText(new Point(e[f].position.x-c*.25,e[f].position.y)),g.content=""+f+" Boyutlu"),g.style=textStyle}Interaction.dim=e};