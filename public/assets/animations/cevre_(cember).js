/*Styles*/
var triangleStyle={fill:"#f55","stroke-width":"2px"},textStyle={"font-size":"16px","text-color":"#55f"},edgeStyle={"stroke-width":"2px"},angleStyle={"stroke-width":"2px"},rulerStyle={fill:"#fff",cursor:"move"},rulerTextStyle={cursor:"move"},rulerLineStyle={cursor:"move"},Interaction=function(){};Interaction(),Interaction.init=function(a){Main.setObjective('Aşağıdaki çemberin yarıçapını cetvel yardımıyla ölçünüz ve çevresini hesaplayınız. Bulduğunuz sonucu aşağıdaki kutucuğa yazınız ve “Kontrol” düğmesine basınız. <span style="font-weight:bold;">(π = 3 alınız.)</span>'),Interaction.container=a,Interaction.container.innerHTML='<div id="T" style="padding-top:5px;"></div><div id="B"></div>',Interaction.paper=new Raphael($("div#T",Interaction.container).get(0),$("div#T",Interaction.container).width(),$(Interaction.container).height()*.6),$("div#B",Interaction.container).html('<div style="text-align:center;">Çevre&nbsp;=&nbsp;<input type="text" style="width:35px;height:30px;font-size:16px;font-weight:bold;text-align:center;" id="input" maxlength="3" />&nbsp;br²</div><div style="text-align:right;"><span id="status"></span>&emsp;<input type="button" id="control" class="control_button" value="Kontrol" onclick="Interaction.checkAnswer()" /></div>'),Interaction.control=$("#control",Interaction.container).get(0),Interaction.input=$("#input",Interaction.container).get(0),Interaction.nextQuestion()},Interaction.generateCircle=function(){var a,b,c;a=Interaction.paper.width*.4,b=Interaction.paper.height*.5;do c=Math.floor(Math.min(a,b)*(Math.random()*.7+.3)/Interaction.br)*Interaction.br;while(Interaction.r==c);Interaction.paper.circle(a,b,1).attr(edgeStyle).toBack(),Interaction.paper.circle(a,b,c+1).attr(edgeStyle).toBack(),Interaction.paper.line(a,b,a+c,b).attr(edgeStyle).toBack(),Interaction.paper.text(a-7,b+7,"O").attr(textStyle).toBack(),Interaction.paper.text(a+c*.4,b+7,"r").attr(textStyle).toBack(),Interaction.r=c,Interaction.input.onkeyup=function(a){console.log(a.keyCode),a.keyCode==13&&Interaction.checkAnswer()}},Interaction.nextQuestion=function(){Interaction.paper.clear(),Interaction.control.onclick=Interaction.checkAnswer,Interaction.control.value="Kontrol",Interaction.input.value="",Interaction.setStatus(""),Interaction.trial=0,Interaction.preventDrag=!1,Interaction.drawRuler(),Interaction.generateCircle()},Interaction.checkAnswer=function(){var a=Interaction.input.value,b=2*Interaction.r*3/Interaction.br;a==b?(Interaction.setStatus("Tebrikler!",!0),Interaction.control.value="Sonraki",Interaction.control.onclick=Interaction.nextQuestion,Interaction.input.onkeyup=Interaction.nextQuestion):Interaction.trial==0?(Interaction.setStatus("Yanlış cevap, tekrar deneyiniz",!1),Interaction.trial++):(Interaction.setStatus("Yanlış cevap. Doğru cevap "+b+" olacaktı.",!1),Interaction.control.onclick=Interaction.nextQuestion,Interaction.input.onkeyup=Interaction.nextQuestion,Interaction.input.value=b)},Interaction.setStatus=function(a,b){$("#status").html(a),b===!0?$("#status").get(0).className="status_true":b===!1?$("#status").get(0).className="status_false":$("#status").get(0).className="status"},Interaction.drawRuler=function(){var a,b,c,d,e,f;Interaction.rulerSet=Interaction.paper.set(),a=Interaction.paper.width*.7,b=Interaction.paper.height*.2,c=Interaction.paper.width*.2,Interaction.br=Math.floor(c*.1),d=Interaction.paper.height*.2,Interaction.rulerSet.push(Interaction.paper.rect(a,b,c,d).attr(rulerStyle).data({x:a,y:b,w:c,h:d}));var g=b+d*.6,h=b+d*.4,i=b+d;for(var j=0;j<10;j++){var k=a+Interaction.br*(.5+j);Interaction.rulerSet.push(Interaction.paper.line(k,g,k,i).attr(rulerLineStyle).attr({x:k,y:g})),Interaction.rulerSet.push(Interaction.paper.text(k,h,j).attr(rulerTextStyle).attr({x:k,y:h}))}var l=function(){if(Interaction.preventDrag)return;this.ox=this.attr("x"),this.oy=this.attr("y"),this.odx=0,this.ody=0,this._x=Interaction.rulerSet[0].data("x"),this._xw=Interaction.rulerSet[0].data("x")+Interaction.rulerSet[0].data("w"),this._y=Interaction.rulerSet[0].data("y"),this._yh=Interaction.rulerSet[0].data("y")+Interaction.rulerSet[0].data("h")},m=function(a,b){if(Interaction.preventDrag)return;if(this._x+a<=0||this._xw+a>=Interaction.paper.width)a=this.odx;if(this._y+b<=0||this._yh+b>=Interaction.paper.height)b=this.ody;for(var c=0;c<Interaction.rulerSet.length;c++)Interaction.rulerSet[c].transform("T"+(a-this.odx)+","+(b-this.ody)+" ...");this.odx=a,this.ody=b},n=function(){if(Interaction.preventDrag)return;Interaction.preventDrag=!0;var a=function(){Interaction.preventDrag=!1},b=Raphael.animation({transform:"T"+ -this.odx+" "+ -this.ody+" ..."},200);for(var c=0;c<Interaction.rulerSet.length;c++)Interaction.rulerSet[c].animateWith(Interaction.rulerSet[0],b,b);setTimeout(a,200)};for(var j=0;j<Interaction.rulerSet.length;j++){if(Interaction.rulerSet[j]=="undefined"||Interaction.rulerSet[j]==null)continue;Interaction.rulerSet[j].drag(m,l,n)}};