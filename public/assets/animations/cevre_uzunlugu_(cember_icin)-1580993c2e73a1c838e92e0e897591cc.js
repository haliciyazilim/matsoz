/*Styles*/
var triangleStyle={fill:"#f55","stroke-width":"2px"},textStyle={fontSize:14,strokeColor:"#000",fillColor:"#000"},edgeStyle={strokeWidth:2,strokeColor:"#000",fillColor:"#fff"},angleStyle={"stroke-width":"2px"},rulerStyle={strokeColor:"#000",strokeWidth:2,fillColor:"#EED"},rulerTextStyle={},rulerLineStyle={strokeWidth:2,strokeColor:"#000"},Interaction=function(){};Interaction(),Interaction.getFramework=function(){return"paper"},Interaction.init=function(a){Main.setObjective('Aşağıdaki çemberin yarıçapını cetvel yardımıyla ölçünüz ve çevresini hesaplayınız. Bulduğunuz sonucu aşağıdaki kutucuğa yazınız ve “Kontrol” düğmesine basınız. <span style="font-weight:bold;">(π = 3 alınız.)</span>'),Interaction.container=a,$(Interaction.container).append('<div id="B" style="position:absolute; top:70%; left:0%; width:100%; "></div>'),Interaction.paper={width:500,height:200},$("div#B",Interaction.container).html('<div style="text-align:center;">Çevre&nbsp;=&nbsp;<input type="text" style="width:35px;height:30px;font-size:16px;font-weight:bold;text-align:center;" id="input" maxlength="3" />&nbsp;br²</div><div style="text-align:right;"><span id="status"></span>&emsp;<input type="button" id="control" class="control_button" value="Kontrol" onclick="Interaction.checkAnswer()" /></div>'),Interaction.control=$("#control",Interaction.container).get(0),Interaction.input=$("#input",Interaction.container).get(0),Interaction.drawRuler(),Interaction.nextQuestion()},Interaction.generateCircle=function(){var a,b,c;a=Interaction.paper.width*.4,b=Interaction.paper.height*.5+10;do c=Math.floor(Math.min(a,b)*(Math.random()*.7+.3)/Interaction.br)*Interaction.br;while(Interaction.r==c);Interaction.circleSet=new Group;var d=new Path.Circle(new Point(a,b),1);d.style=edgeStyle;var e=new Path.Circle(new Point(a,b),c+1);e.style=edgeStyle;var f=new Path.Line(new Point(a,b),new Point(a+c,b));f.style=edgeStyle;var g=new PointText(new Point(a-15,b+15));g.content="O",g.style=textStyle;var h=new PointText(new Point(a+c*.5-5,b+15));h.content="r",h.style=textStyle,Interaction.circleSet.addChild(e),Interaction.circleSet.addChild(d),Interaction.circleSet.addChild(f),Interaction.circleSet.addChild(g),Interaction.circleSet.addChild(h),Interaction.circleSet.insertBelow(Interaction.rulerSet),Interaction.r=c,Interaction.input.onkeyup=function(a){console.log(a.keyCode),a.keyCode==13&&Interaction.checkAnswer()}},Interaction.nextQuestion=function(){Interaction.circleSet&&Interaction.circleSet.remove(),Interaction.control.onclick=Interaction.checkAnswer,Interaction.control.value="Kontrol",Interaction.input.value="",Interaction.setStatus(""),Interaction.trial=0,Interaction.preventDrag=!1,Interaction.generateCircle();var a=function(){Interaction.preventDrag=!1},b=Raphael.animation({transform:"t"+ -Interaction.odx+" "+ -Interaction.ody+" ..."},200);AnimationManager.translate(Interaction.rulerSet,new Point(Interaction.rulerSet.firstPosition.x-Interaction.rulerSet.position.x,Interaction.rulerSet.firstPosition.y-Interaction.rulerSet.position.y),500),setTimeout(a,200),Interaction.odx=0,Interaction.ody=0},Interaction.checkAnswer=function(){var a=Interaction.input.value,b=2*Interaction.r*3/Interaction.br;a==b?(Interaction.setStatus("Tebrikler!",!0),Interaction.control.value="Sonraki",Interaction.control.onclick=Interaction.nextQuestion,Interaction.input.onkeyup=Interaction.nextQuestion):Interaction.trial==0?(a==""||isNaN(a)?Interaction.setStatus("Lütfen bir sayı giriniz",!1):Interaction.setStatus("Yanlış cevap, tekrar deneyiniz",!1),Interaction.trial++):(Interaction.setStatus("Yanlış cevap. Doğru cevap "+b+" olacaktı.",!1),Interaction.control.onclick=Interaction.nextQuestion,Interaction.input.onkeyup=Interaction.nextQuestion,Interaction.input.value=b)},Interaction.setStatus=function(a,b){$("#status").html(a),b===!0?$("#status").get(0).className="status_true":b===!1?$("#status").get(0).className="status_false":$("#status").get(0).className="status"},Interaction.drawRuler=function(){var a,b,c,d,e,f;Interaction.rulerSet=new Group,Interaction.rulerSet.name="rulerSet",a=Interaction.paper.width*.7,b=Interaction.paper.height*.2,c=Interaction.paper.width*.2,Interaction.br=Math.floor(c*.1),d=Interaction.paper.height*.2;var g=new Path.Rectangle(new Point(a,b),new Size(c,d));g.style=rulerStyle,Interaction.rulerSet.addChild(g);var h=b+d*.6,i=b+d*.4,j=b+d;for(var k=0;k<10;k++){var l=a+Interaction.br*(.5+k),m=new Path.Line(new Point(l,h),new Point(l,j));m.style=rulerLineStyle,Interaction.rulerSet.addChild(m);var n=new PointText(new Point(l-4,i));n.style=rulerTextStyle,n.content=k,Interaction.rulerSet.addChild(n)}Interaction.rulerX=-1,Interaction.rulerY=-1;var o=function(a,b){if(Interaction.preventDrag===!0)return;if(this._x+a+Interaction.odx<=0||this._xw+a+Interaction.odx>=Interaction.paper.width)a=0;if(this._y+b+Interaction.ody<=0||this._yh+b+Interaction.ody>=Interaction.paper.height)b=0;Interaction.rulerSet.position=[Interaction.rulerSet.position.x+a,Interaction.rulerSet.position.y+b]},p=function(){if(Interaction.preventDrag===!0)return;Interaction.odx=this.odx,Interaction.ody=this.ody},q=new Tool;q.onMouseDown=function(a){this.drag=!1,a.item.name=="rulerSet"&&(this.drag=!0)},q.onMouseDrag=function(a){this.drag==1&&Interaction.rulerSet.move(a.delta.x,a.delta.y)},q.onMouseUp=function(){this.drag=!1},q.activate(),Interaction.rulerSet.move=o,Interaction.rulerSet.up=p,Interaction.rulerSet.firstPosition=new Point(Interaction.rulerSet.position.x,Interaction.rulerSet.position.y)};