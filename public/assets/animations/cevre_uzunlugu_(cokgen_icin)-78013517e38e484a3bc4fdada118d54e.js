// JavaScript Document
/*Styles*/
function square(a,b,c){var d,e,f;f=Math.min(c.width,c.height)*.6,d=(c.width-f)*.5,e=(c.height-f)*.5,c.rect(d,e,f,f).attr(edgeStyle).attr(rectangularShapeStyle),c.text(d+f*.5,e+f*1.1,""+a+" "+b).attr(textStyle),c.text(d+f+25,e+f*.5,""+a+" "+b).attr(textStyle),c.text(d-10,e+f+10,TestGenerator.letters.shift()).attr(textStyle),c.text(d+f+10,e+f+10,TestGenerator.letters.shift()).attr(textStyle),c.text(d+f+10,e-10,TestGenerator.letters.shift()).attr(textStyle),c.text(d-10,e-10,TestGenerator.letters.shift()).attr(textStyle)}function rectangle(a,b,c,d){var e,f,g,h,i,j=Math.min(d.width,d.height);a>b?(i=j*.6,g=i,h=i*(b/a)):(i=j*.6,g=i*(a/b),h=i),e=(d.width-g)*.5,f=(d.height-h)*.5,d.rect(e,f,g,h).attr(edgeStyle).attr(rectangularShapeStyle),d.text(e+g*.5,f+10+h,""+a+" "+c).attr(textStyle),d.text(e+25+g,f+h*.5,""+b+" "+c).attr(textStyle),d.text(e-10,f+h+10,TestGenerator.letters.shift()).attr(textStyle),d.text(e+g+10,f+h+10,TestGenerator.letters.shift()).attr(textStyle),d.text(e+g+10,f-10,TestGenerator.letters.shift()).attr(textStyle),d.text(e-10,f-10,TestGenerator.letters.shift()).attr(textStyle)}function rhomboid(a,b,c,d,e){var f,g,h,i,j,k,l=Math.min(e.width,e.height);2*a+b>c?(k=l*.8,h=k*((a+b)/(2*a+b)),i=k*a/(2*a+b),j=k*(c/(2*a+b))):(k=l*.8,h=k*((a+b)/c),i=k*a/c,j=k),f=(e.width-(h+i))*.5,g=(e.height-j)*.5,e.rhomboid(f,g,i,h,j).attr(edgeStyle),e.text(f+h*.5,g+10+j,""+(a+b)+" "+d).attr(textStyle),e.text(f+h+i*.5+25,g+j*.5,""+c+" "+d).attr(textStyle),e.text(f-10,g+j+10,TestGenerator.letters.shift()).attr(textStyle),e.text(f+h+10,g+j+10,TestGenerator.letters.shift()).attr(textStyle),e.text(f+h+i+10,g-10,TestGenerator.letters.shift()).attr(textStyle),e.text(f+i-10,g-10,TestGenerator.letters.shift()).attr(textStyle)}function rhombus(a,b,c,d){var e,f,g,h,i,j=Math.min(d.width,d.height)*3.5/5;H=Math.sqrt(a*a-Math.pow(b*.5,2)),b>H?(g=j,h=j*H/b):(g=j*b/H,h=j),e=(d.width-g)*.5,f=(d.height-h)*.6,d.rhombus(e,f,g,h).attr(edgeStyle),d.text(e+g*.1,f+h*.2,""+a+" "+c).attr(textStyle),d.text(e+g*.1,f+h*.8,""+a+" "+c).attr(textStyle),d.text(e+g*.9,f+h*.2,""+a+" "+c).attr(textStyle),d.text(e+g*.9,f+h*.8,""+a+" "+c).attr(textStyle),d.text(e-10,f+h*.5,TestGenerator.letters.shift()).attr(textStyle),d.text(e+g*.5,f-10,TestGenerator.letters.shift()).attr(textStyle),d.text(e+g+10,f+h*.5,TestGenerator.letters.shift()).attr(textStyle),d.text(e+g*.5,f+h+10,TestGenerator.letters.shift()).attr(textStyle)}function trapezoid(a,b,c,d,e,f){var g,h,i,j,k,l,m;l=Math.sqrt(c*c-Math.pow((a-b)*.5,2));var n=Math.min(f.width,f.height);a>l?(m=n*.6,i=m,j=m*b/a,k=m*l/a):(m=n*.6,i=m*a/l,j=m*b/l,k=m),g=(f.width-i)*.5,h=(f.height-k)*.5,f.trapezoid(g,h,i,k,j).attr(edgeStyle),f.text(g+i*.5,h+10+k,""+a+" "+e).attr(textStyle),f.text(g+15+i,h+k*.5,""+d+" "+e).attr(textStyle),f.text(g-15,h+k*.5,""+c+" "+e).attr(textStyle),f.text(g+i*.5,h-15,""+b+" "+e).attr(textStyle),f.text(g-10,h+k+10,TestGenerator.letters.shift()).attr(textStyle),f.text(g+i+10,h+k+10,TestGenerator.letters.shift()).attr(textStyle),f.text(g+i-(i-j)*.5+10,h-10,TestGenerator.letters.shift()).attr(textStyle),f.text(g+(i-j)*.5-10,h-10,TestGenerator.letters.shift()).attr(textStyle)}function Triangle(a,b,c,d,e){var f=10,g=-20;this.i=a,this.j=b,this.k=c,this.p1={x:10,y:0},this.p2={x:0,y:0},this.p3={x:0,y:0},this.a1=null,this.a2=null,this.a3=null;var h=e.height,i=(h-40)/Math.max(a,b,c);this.p1.x=60,this.p1.y=h-20,this.p2.x=this.p1.x+this.i*i,this.p2.y=this.p1.y;var h=Math.acos((this.i*this.i+this.k*this.k-this.j*this.j)/(2*this.i*this.k));this.p3.x=this.p1.x+Math.cos(h)*c*i,this.p3.y=this.p1.y-Math.sin(h)*c*i,this.p1.x+=f,this.p2.x+=f,this.p3.x+=f,this.p1.y+=g,this.p2.y+=g,this.p3.y+=g,e.triangle(this.p1.x,this.p1.y,this.p2.x,this.p2.y,this.p3.x,this.p3.y).attr(edgeStyle),e.text(this.p1.x-10,this.p1.y+10,TestGenerator.letters.shift()).attr(textStyle),e.text(this.p2.x+10,this.p2.y+10,TestGenerator.letters.shift()).attr(textStyle),e.text(this.p3.x+10,this.p3.y-10,TestGenerator.letters.shift()).attr(textStyle),this.drawEdgeText=function(a,b,c,d){var e,f;e=a.x+c*Math.sin(b),f=a.y+c*Math.cos(b),this.paper.text(e,f,d).attr(textStyle)},this.calculateAngles=function(){this.a1=Math.acos((this.i*this.i+this.k*this.k-this.j*this.j)/(2*this.i*this.k)),this.a2=Math.acos((this.i*this.i+this.j*this.j-this.k*this.k)/(2*this.i*this.j)),this.a3=Math.acos((this.k*this.k+this.j*this.j-this.i*this.i)/(2*this.k*this.j)),this._a1=Math.floor(Util.radianToDegree(this.a1)),this._a2=Math.round(Util.radianToDegree(this.a2)),this._a3=Math.floor(Util.radianToDegree(this.a3))},this.drawAngle=function(a,b,c,d,e){function f(a,b,c){var d,e,f;return f=Util.findAngle(a.x,a.y,b.x,b.y),d=a.x+Math.cos(f)*c,e=a.y-Math.sin(f)*c,{x:d,y:e}}var g,h,i,j,k,l;l=30;var m,n;m=f(a,b,l),g=m.x,h=m.y,n=f(a,c,l),i=n.x,j=n.y;var o=d>Math.PI?1:0,p=d>0?0:1,q=Util.findAngle(a.x,a.y,b.x,b.y),r=Util.findAngle(a.x,a.y,c.x,c.y),s=Math.abs(q-r)*.5+(Math.abs(q)>Math.abs(r)?r:q);if(e==90){var t,u;m=f(a,b,l/2),g=m.x,h=m.y,n=f(a,c,l/2),i=n.x,j=n.y,t=a.x+Math.sqrt(2)*l/2*Math.cos(s),u=a.y-Math.sqrt(2)*l/2*Math.sin(s),this.paper.line(g,h,t,u).attr(edgeStyle),this.paper.line(i,j,t,u).attr(edgeStyle),this.paper.circle((a.x+t)*.5,(a.y+u)*.5,1).attr("fill","#CCC"),l/=1.5}else k=Util.findDistance(a.x,a.y,g,h),this.paper.path("M"+a.x+","+a.y+" L"+g+","+h+" A"+k+","+k+" 0 "+o+","+p+" "+i+","+j+"  z").attr(angleStyle);var v,w;v=a.x+1.6*l*Math.cos(s),w=a.y-1.6*l*Math.sin(s),this.paper.text(v,w,""+e+"°").attr(textStyle)},this.showAngle=function(a){switch(a){case"A":this.drawAngle(this.p1,this.p2,this.p3,this.a1,this._a1);break;case"B":this.drawAngle(this.p2,this.p3,this.p1,this.a2,this._a2);break;case"C":this.drawAngle(this.p3,this.p1,this.p2,this.a3,this._a3);break;default:throw"invalid argument. valid arguments: [ A , B , C ]"}},this.showEdge=function(a){var b=10;switch(a){case"a":var c=Util.findAngle(this.p1.x,this.p1.y,this.p2.x,this.p2.y);this.drawEdgeText({x:(this.p1.x+this.p2.x)*.5,y:(this.p1.y+this.p2.y)*.5},c,b,this.i+" "+d);break;case"b":var c=Util.findAngle(this.p2.x,this.p2.y,this.p3.x,this.p3.y);this.drawEdgeText({x:(this.p2.x+this.p3.x)*.5+10,y:(this.p2.y+this.p3.y)*.5},c,b,this.j+" "+d);break;case"c":var c=Util.findAngle(this.p3.x,this.p3.y,this.p1.x,this.p1.y);this.drawEdgeText({x:(this.p3.x+this.p1.x)*.5-10,y:(this.p3.y+this.p1.y)*.5},c,b,this.k+" "+d);break;default:throw"invalid argument. valid arguments: [ a , b , c ]"}return this},this.calculateAngles(),this.paper=e}var textStyle={"font-size":"16px"},edgeStyle={"stroke-width":"2px"},rectangularShapeStyle={"shape-rendering":"crispEdges"},angleStyle={fill:"#DDD"},Interaction=function(){};Interaction(),Interaction.init=function(a){Main.setObjective("Aşağıdaki çokgenin çevre uzunluğunu bulunuz."),Interaction.container=a,$(Interaction.container).html('<div id="T"></div><div id="B"></div>'),$(Interaction.container).append("<style>div#L,div#R{float:left;}</style>"),$(Interaction.container).append("<style>div#T{height:70%;text-align:center;padding-top:20px;}</style>"),$(Interaction.container).append("<style>div#L{width:60%;height:100%;text-align:center;}</style>"),$(Interaction.container).append("<style>div#R{width:40%;height:100%;}</style>"),Interaction.T=$("div#T",Interaction.container).get(0),Interaction.paper=new Raphael(Interaction.T,$(Interaction.T).width()*.6,$(Interaction.T).height()*.9),Interaction.input=document.createElement("input"),Interaction.input.className="number_input_field",Interaction.input.setAttribute("type","text"),Interaction.input.setAttribute("maxlength","3"),$("div#B",Interaction.container).html('<div id="L"></div><div id="R"></div>'),$("div#B > div#L",Interaction.container).append("Ç =&nbsp;"),$("div#B > div#L",Interaction.container).append(Interaction.input),$("div#B > div#L",Interaction.container).append('&nbsp;<span id="input_measure"></span>'),Interaction.button=document.createElement("input"),Interaction.button.setAttribute("type","button"),Interaction.button.value="Kontrol",Interaction.button.onclick=TestGenerator.checkAnswer,Interaction.button.className="control_button",$("div#B > div#R",Interaction.container).append(Interaction.button),$("div#B > div#R",Interaction.container).append('<div id="status"></div>'),Interaction.status=$("div#B > div#R > div#status",Interaction.R).get(0),Interaction.status.style.fontSize="12px",Interaction.status.style.fontWeight="bold",Interaction.status.style.paddingTop="10px",TestGenerator(Interaction.paper)},Interaction.setStatus=function(a){Interaction.status.innerHTML=a};var TestGenerator=function(a){TestGenerator.paper=a,TestGenerator.nextQuestion()};TestGenerator.nextQuestion=function(){TestGenerator.shape=null,TestGenerator.trial=0,TestGenerator.values=null,TestGenerator.paper.clear(),Interaction.setStatus(""),Interaction.button.value="Kontrol",Interaction.input.value="",Interaction.input.onkeyup=function(a){console.log(a.keyCode),a.keyCode==13&&TestGenerator.checkAnswer()},Interaction.input.style.color="",Interaction.button.onclick=TestGenerator.checkAnswer,TestGenerator.shape=Math.floor(Math.random()*4);var a=Math.floor(Math.random()*2);TestGenerator.setMeasure(a),TestGenerator.letters=Math.random()>.5?["A","B","C","D","E"]:["X","Y","Z","W","Q"];switch(TestGenerator.shape){case 0:var b=Math.floor(Math.random()*10)+5,c=4*b;TestGenerator.values={a:b,cevre:c},square(b,TestGenerator.getMeasure(),TestGenerator.paper);break;case 1:var b,d;b=Math.floor(Math.random()*10)+5,d=b;while(b==d)d=Math.floor(Math.random()*10)+5;TestGenerator.values={a:b,b:d,cevre:2*(b+d)},rectangle(b,d,TestGenerator.getMeasure(),TestGenerator.paper);break;case 2:var b,d,e;b=Math.floor(Math.random()*5)+5,e=b;while(b==e)e=Math.floor(Math.random()*5)+5;d=Math.floor(Math.random()*5)+5,TestGenerator.values={a:b,b:d,cevre:2*(b+e+d)},rhomboid(b,e,d,TestGenerator.getMeasure(),TestGenerator.paper);break;case 3:var b,d,f;b=Math.floor(Math.random()*3)+5,d=Math.floor(Math.random()*4)+4,f=b+d;while(b+d<=f||Math.abs(b-d)>=f)f=Math.floor(Math.random()*5)+5;TestGenerator.values={a:b,b:d,c:f,cevre:b+d+f},(new Triangle(b,d,f,TestGenerator.getMeasure(),TestGenerator.paper)).showEdge("a").showEdge("b").showEdge("c");break;case 4:var b,d,e,f;b=Math.floor(Math.random()*5)+5,e=b;while(e>=b)e=Math.floor(Math.random()*5)+4;d=Math.floor(Math.random()*5)+5,f=Math.floor(Math.random()*3+d-1),TestGenerator.values={a:b,b:d,c:f,cevre:b+e+d+f},trapezoid(b,e,d,f,TestGenerator.getMeasure(),TestGenerator.paper);break;case 5:var b,g;b=Math.floor(Math.random()*6)+4,g=2*b;while(g>=2*b)g=Math.floor(Math.random()*5)+5;TestGenerator.values={a:b,cevre:4*b},rhombus(b,g,TestGenerator.getMeasure(),TestGenerator.paper)}},TestGenerator.setMeasure=function(a){TestGenerator.measure=a,$("#input_measure").html(TestGenerator.getMeasure())},TestGenerator.getMeasure=function(){if(TestGenerator.measure==null||TestGenerator.measure=="undefined")throw"TestGenerator.values.m is not defined";return TestGenerator.measure==0?"cm":"m"},TestGenerator.checkAnswer=function(){var a=Interaction.input.value,b=!1;isNaN(a)?(b=!0,Interaction.setStatus("Lütfen sayı giriniz.")):a==TestGenerator.values.cevre?(Interaction.setStatus("Tebrikler !"),Interaction.button.onclick=TestGenerator.nextQuestion,Interaction.button.value="Sonraki",Interaction.input.onkeyup=TestGenerator.nextQuestion):(Interaction.setStatus("Tekrar deneyiniz. "),b=!0),b&&TestGenerator.trial>0?(Interaction.input.style.color="red",Interaction.input.value=TestGenerator.values.cevre,Interaction.input.onkeyup=TestGenerator.nextQuestion,Interaction.setStatus("Yanlış. Doğru cevap: "+TestGenerator.values.cevre+" "+TestGenerator.getMeasure()),Interaction.button.onclick=TestGenerator.nextQuestion,Interaction.button.value="Sonraki"):(Interaction.button.onlick=TestGenerator.nextQuestion,TestGenerator.trial++,TestGenerator.trial++)};