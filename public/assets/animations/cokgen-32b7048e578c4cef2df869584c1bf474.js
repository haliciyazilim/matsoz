// JavaScript Document
/*Styles*/
function __Styles(){shapeStyle={strokeColor:"#255b63",strokeWidth:2,fillColor:new RgbColor(1,1,1,0)}}function Triangle(a,b,c,d,e,f,g){this.i=a,this.j=b,this.k=c,this.p1={x:0,y:0},this.p2={x:0,y:0},this.p3={x:0,y:0},this.a1=null,this.a2=null,this.a3=null;var h=Math.min(f,g),i=h/Math.max(a,b,c);this.p1.x=d,this.p1.y=e+h,this.p2.x=this.p1.x+this.i*i,this.p2.y=this.p1.y;var h=Math.acos((this.i*this.i+this.k*this.k-this.j*this.j)/(2*this.i*this.k));return this.p3.x=this.p1.x+Math.cos(h)*c*i,this.p3.y=this.p1.y-Math.sin(h)*c*i,new Path.Triangle(this.p1,this.p2,this.p3)}function pentagon(a,b){var c=[10,70,150,200,300];return new Path.EquiradialPolygon(a,b,c)}function regularpentagon(a,b){return new Path.RegularPolygon(a,b,5)}function hexagon(a,b){var c=[10,50,100,150,200,300];return new Path.EquiradialPolygon(a,b,c)}function regularhexagon(a,b){return new Path.RegularPolygon(a,b,6)}var textStyle={fontSize:13,fillColor:"#fff",justification:"center"},edgeStyle={"stroke-width":"2px"},angleStyle={fill:"#DDD"},animationEdgeStyle={strokeColor:"#000",strokeWidth:2},dropableShapeHoverStyle={strokeColor:"#000",fillColor:"#dd9",strokeWidth:2},dropableShapeDefaultStyle="default",dropableShapeDefaultTriangleStyle={strokeColor:"#999",fillColor:"rgb(146,208,80)",strokeWidth:1},dropableShapeDefaultRectangleStyle={strokeColor:"#999",fillColor:"rgb(226,108,9)",strokeWidth:1},dropableShapeDefaultPentagonStyle={strokeColor:"#999",fillColor:"rgb(177,160,198)",strokeWidth:1},dropableShapeDefaultHexagonStyle={strokeColor:"#999",fillColor:"rgb(217,148,147)",strokeWidth:1},dropableShapeDroppedTrueStyle={strokeColor:"#0f0",fillColor:"#afa"},dropableShapeDroppedFalseStyle={strokeColor:"#f00",fillColor:"#f00"},Animation={init:function(a){function b(a,b,c,d){if(a.vertexArray==null||a.vertexArray==undefined)return;for(var e=0,f=a.vertexArray.length;e<f;e++){var g=new Path.Line(a.vertexArray[e],a.vertexArray[(e+1)%f]);g.set_style(animationEdgeStyle);var h=Math.floor(Math.random()*180)-90,i=Math.floor(Math.random()*400)-200,j=Math.floor(Math.random()*50)-25;g.angle=h,g.opacity=0,g.firstPosition=g.position,g.translate(i,j),g.lastTransformation=g.matrix,g.animate({style:{opacity:1,angle:0,position:new Point(g.position.x-i,g.position.y-j)},duration:b,delay:c,animationType:"easeInEaseOut",update:function(){var a=new Matrix;a.rotate(this.angle,this.firstPosition),a.translate(this.lastTransformation),this.setMatrix(a),this.lastTransformation=this.matrix}})}setTimeout(d,b+c)}Animation.container=a;var c=$(a).width(),d=$(a).height(),e=new Size(140,140),f=new Point(0,25),g=new Point(c*.25,0),h=new Point(c*.5,0),i=new Point(c*.75,0);b(new Path.EquiradialPolygon(f,e,[90,170,330],0),1500,500,function(){$(Animation.container).append('<span style="position:absolute;bottom:20px;left:50px">Üçgen</span>')}),b(new Path.EquiradialPolygon(g,e,[10,120,170,250],0),2500,100,function(){$(Animation.container).append('<span style="position:absolute;bottom:20px;left:30%">Dörtgen</span>')}),b(new Path.EquiradialPolygon(h,e,[10,60,150,180,260],0),3e3,300,function(){$(Animation.container).append('<span style="position:absolute;bottom:20px;left:53.5%">Beşgen</span>')}),b(new Path.EquiradialPolygon(i,e,[20,70,99,136,240,342],0),3e3,900,function(){$(Animation.container).append('<span style="position:absolute;bottom:20px;left:80%">Altıgen</span>')})}},Interaction=function(){};Interaction(),Interaction.images=[{id:"dropable_default",src:"/assets/animations/cokgenler/dropable_default.png"},{id:"dropable_hover",src:"/assets/animations/cokgenler/dropable_hover.png"},{id:"dropable_false",src:"/assets/animations/cokgenler/dropable_false.png"},{id:"dropable_true",src:"/assets/animations/cokgenler/dropable_true.png"}],Interaction.getFramework=function(){return"paper"},Interaction.init=function(a){Main.setObjective("Yandaki çokgenleri sınıflandırınız."),Interaction.container=a,Interaction.container.top=$(a).offset().top,Interaction.container.left=$(a).offset().left;var b=$(Interaction.container).width(),c=$(Interaction.container).height();project.activeLayer.removeChildren(),Interaction.dropableShapes={setImage:function(a){Interaction.dropableShapes.triangle.setImage($("#"+a).get(0)),Interaction.dropableShapes.rectangle.setImage($("#"+a).get(0)),Interaction.dropableShapes.pentagon.setImage($("#"+a).get(0)),Interaction.dropableShapes.hexagon.setImage($("#"+a).get(0))},hitTest:function(a){if(Interaction.dropableShapes.triangle.bounds.contains(a))return Interaction.dropableShapes.triangle;if(Interaction.dropableShapes.rectangle.bounds.contains(a))return Interaction.dropableShapes.rectangle;if(Interaction.dropableShapes.pentagon.bounds.contains(a))return Interaction.dropableShapes.pentagon;if(Interaction.dropableShapes.hexagon.bounds.contains(a))return Interaction.dropableShapes.hexagon}},Interaction.createDropableShapesLeft(0,0,b*.2,c*.8),Interaction.createDropableShapesRight(b*.8,0,b*.2,c*.8),Interaction.generateRandomShapes(b*.2,10,b*.6,c),Interaction.paper={width:500,height:300},Interaction.preventDrag=!1,Interaction.status==null||Interaction.status=="undefined"?(Interaction.status=document.createElement("div"),Interaction.status.className="status_true",$(Interaction.status).css({position:"absolute",top:""+(c-40)+"px",left:"0px","padding-left":"20px",width:"100%"}),Interaction.container.appendChild(Interaction.status)):Interaction.setStatus("");var d=new Tool;d.setHitTestOptions({fill:!0,stroke:!0,segments:!0,tolerance:2,"class":"draggable"}),d.onMouseDown=function(a){a.item&&(d.shape=a.item,a.item.start())},d.onMouseDrag=function(a){d.shape&&d.shape.move(a.delta.x,a.delta.y,a.point.x,a.point.y)},d.onMouseUp=function(a){d.shape&&d.shape.up(),d.shape=null},d.activate()};var start=function(){this.ox=this.position.x,this.oy=this.position.y,this.hitShape=null,this.odx=0,this.ody=0;var a=$(Interaction.container).offset();this.s_left=a.left,this.s_top=a.top,this.inDropableShape=!1;if(this.preventDrag==null||this.preventDrag=="undefined")this.preventDrag=!1;return!0},move=function(a,b,c,d){if(this.preventDrag==1)return;this.odx+=a,this.ody+=b,Interaction.dropableShapes.setImage("dropable_default"),this.position=[this.position.x+a,this.position.y+b];var e=Interaction.dropableShapes.hitTest(new Point(c,d));return e?(this.inDropableShape=!0,this.hitShape=e,this.hitShape.setImage($("#dropable_hover").get(0))):(this.inDropableShape=!1,this.hitShape=null),!0},up=function(){if(this.preventDrag==1)return;this.preventDrag=!0,Interaction.dropableShapes.setImage("dropable_default");var a=!1;this.inDropableShape==1?this.hitShape.numberOfEdges===this.numberOfEdges?(this.opacityX=1,this.scaleRatio=.9,this.animate({style:{opacityX:-0.3,scaleRatio:1},duration:500,update:function(){this.opacityX<.7&&(this.opacity=this.opacityX+.3),this.scale(this.scaleRatio)},callback:this.remove}),this.class=null,this.hitShape.setImage($("#dropable_true").get(0)),setTimeout(function(){Interaction.dropableShapes.setImage("dropable_default")},400)):(a=!0,this.hitShape.setImage($("#dropable_false").get(0)),setTimeout(function(){Interaction.dropableShapes.setImage("dropable_default")},400)):a=!0;if(a==1){var b=Math.sqrt(this.odx*this.odx+this.ody*this.ody),c=1,d=b/c;this.animate({style:{position:new Point(this.ox,this.oy)},duration:d,callback:this.callback})}var e=!1;for(var f=0;f<Interaction.shapes.length;f++)Interaction.shapes[f].class=="draggable"&&(e=!0);e==0&&Interaction.setStatus('<span style="position:relative;top:10px" class="status_true">Tebrikler bütün çokgenleri doğru şekilde sınıflandırdınız.</span>&emsp;<input type="button" onclick="Interaction.init(Interaction.container);"  class="repeat_button"/>')};Interaction.generateRandomShapes=function(a,b,c,d){Interaction.shapes=[];var e=c*.25,f=d*.3;Interaction.shapeCount=-1;do{var g,h,i,j,k=Interaction.findSpace(c,d);g=k.x+a,h=k.y+b,Interaction.shapeType=Math.floor(Math.random()*6),i=e*.7,j=f*.7;var l={},m,n,o=12;Interaction.shapeCount++,Interaction.shapeCount=Interaction.shapeCount%o;if(Interaction.shuffledArray==null||Interaction.shuffledArray==undefined)Interaction.shuffledArray=Util.getShuffledArray(o);Interaction.shapeType=Interaction.shuffledArray[Interaction.shapeCount];switch(Interaction.shapeType){case 0:j=i=Math.min(i,j),l=new Path.Rectangle(new Point(g,h),new Size(i,j)),n=4;break;case 1:var p,q,r;p=q=r=5,l=new Triangle(p,q,r,g,h,i,j),n=3;break;case 2:l=regularpentagon(new Point(g,h),new Size(i,j)),n=5;break;case 3:l=hexagon(new Point(g,h),new Size(i,j)),n=6;break;case 4:l=new Path.Rhomboid(new Point(g,h+j*.1),new Size(i*.8,j*.7),i*.2),n=4;break;case 5:l=new Path.Rhombus(new Point(g,h+j*.1),new Size(i,j*.7)),n=4;break;case 6:j=i=Math.min(i,j);while(j==i||j>f)j=-Math.floor(Math.random()*3)*30+i+30;l=new Path.Rectangle(new Point(g,h+10),new Size(i,j)),n=4;break;case 7:var p,q,r;r=5,p=3,q=4,l=new Triangle(p,q,r,g,h,i,j),n=3;break;case 8:l=pentagon(new Point(g,h),new Size(i,j)),n=5;break;case 9:l=regularhexagon(new Point(g,h),new Size(i,j)),n=6;break;case 10:var p,q,r;p=q=r=5,p=6,q=8,l=new Triangle(p,q,r,g+5,h-15,i,j),n=3;break;case 11:var p,q,r;p=q=r=5,p=4,q=3,l=new Triangle(p,q,r,g,h-15,i,j),n=3}l.numberOfEdges=n,l.class="draggable",l.style=shapeStyle,l.start=start,l.move=move,l.up=up,l.callback=function(){this.preventDrag=!1},l.order=Interaction.shapes.length,Interaction.shapes.push(l)}while(Interaction.shapes.length<12)},Interaction.createDropableShape=function(a,b,c,d,e){var f=new Raster("dropable_default");f.position=new Point(a,b),f.class="dropableShape";var g=new PointText(new Point(a+1,b+6));g.set_style(textStyle),g.fillColor="#2f4f54",g.content=e;var g=new PointText(new Point(a,b+5));return g.set_style(textStyle),g.content=e,f},Interaction.createDropableShapesLeft=function(a,b,c,d){var e,f,g,i,j;w=c*.9,h=c*.8,e=a+c*.5,f=b+(d-h)*.5,Interaction.dropableShapes.triangle=Interaction.createDropableShape(e,f,w,h,"Üçgen"),Interaction.dropableShapes.triangle.numberOfEdges=3,Interaction.dropableShapes.rectangle=Interaction.createDropableShape(e,f+h*1.2,w,h,"Dörtgen"),Interaction.dropableShapes.rectangle.numberOfEdges=4},Interaction.createDropableShapesRight=function(a,b,c,d){var e,f,g,i,j;j=Math.min(c,d),w=j*.9,h=j*.8,e=a+c*.5,f=b+(d-h)*.5,Interaction.dropableShapes.pentagon=Interaction.createDropableShape(e,f,w,h,"Beşgen"),Interaction.dropableShapes.pentagon.numberOfEdges=5,Interaction.dropableShapes.hexagon=Interaction.createDropableShape(e,f+h*1.2,w,h,"Altıgen"),Interaction.dropableShapes.hexagon.numberOfEdges=6},Interaction.findSpace=function(a,b){var c=Interaction.shapes.length,d={x:Math.floor(c%4)*a*.25,y:Math.floor(c/4)*b*.3};return d},Interaction.setStatus=function(a){$(Interaction.status).hide(),Interaction.status.innerHTML=a,$(Interaction.status).show()};