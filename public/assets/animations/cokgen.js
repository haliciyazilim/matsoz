// JavaScript Document
/*Styles*/
function Triangle(a,b,c,d,e,f,g){this.i=a,this.j=b,this.k=c,this.p1={x:0,y:0},this.p2={x:0,y:0},this.p3={x:0,y:0},this.a1=null,this.a2=null,this.a3=null;var h=Math.min(f,g),i=h/Math.max(a,b,c);this.p1.x=d,this.p1.y=e+h,this.p2.x=this.p1.x+this.i*i,this.p2.y=this.p1.y;var h=Math.acos((this.i*this.i+this.k*this.k-this.j*this.j)/(2*this.i*this.k));return this.p3.x=this.p1.x+Math.cos(h)*c*i,this.p3.y=this.p1.y-Math.sin(h)*c*i,new Path.Triangle(this.p1,this.p2,this.p3)}function pentagon(a,b){var c=[10,70,150,200,300];return new Path.EquiradialPolygon(a,b,c)}function regularpentagon(a,b){return new Path.RegularPolygon(a,b,5)}function hexagon(a,b){var c=[10,50,100,150,200,300];return new Path.EquiradialPolygon(a,b,c)}function regularhexagon(a,b){return new Path.RegularPolygon(a,b,6)}var textStyle={fontSize:16,strokeColor:"#fff",strokeWidth:0,fillColor:"#fff"},edgeStyle={"stroke-width":"2px"},angleStyle={fill:"#DDD"},shapeStyle={strokeColor:"#000",strokeWidth:2,fillColor:"#fff"},dropableShapeHoverStyle={strokeColor:"#000",fillColor:"#dd9",strokeWidth:2},dropableShapeDefaultStyle="default",dropableShapeDefaultTriangleStyle={strokeColor:"#999",fillColor:"rgb(146,208,80)",strokeWidth:1},dropableShapeDefaultRectangleStyle={strokeColor:"#999",fillColor:"rgb(226,108,9)",strokeWidth:1},dropableShapeDefaultPentagonStyle={strokeColor:"#999",fillColor:"rgb(177,160,198)",strokeWidth:1},dropableShapeDefaultHexagonStyle={strokeColor:"#999",fillColor:"rgb(217,148,147)",strokeWidth:1},dropableShapeDroppedTrueStyle={strokeColor:"#0f0",fillColor:"#afa"},dropableShapeDroppedFalseStyle={strokeColor:"#f00",fillColor:"#f00"},Interaction=function(){};Interaction(),Interaction.getFramework=function(){return"paper"},Interaction.init=function(a){Main.setObjective("Aşağıdaki çokgenlerden düzgün olanları seçiniz."),Interaction.container=a,Interaction.container.top=$(a).offset().top,Interaction.container.left=$(a).offset().left;var b=$(Interaction.container).width(),c=$(Interaction.container).height();project.activeLayer.removeChildren(),Interaction.dropableShapes={setStyle:function(a){a==dropableShapeDefaultStyle?(Interaction.dropableShapes.triangle.setStyle(dropableShapeDefaultTriangleStyle),Interaction.dropableShapes.rectangle.setStyle(dropableShapeDefaultRectangleStyle),Interaction.dropableShapes.pentagon.setStyle(dropableShapeDefaultPentagonStyle),Interaction.dropableShapes.hexagon.setStyle(dropableShapeDefaultHexagonStyle)):(Interaction.dropableShapes.triangle.setStyle(a),Interaction.dropableShapes.rectangle.setStyle(a),Interaction.dropableShapes.pentagon.setStyle(a),Interaction.dropableShapes.hexagon.setStyle(a))}},Interaction.createDropableShapesLeft(b*0,0,b*.2,c),Interaction.createDropableShapesRight(b*.8,0,b*.2,c),Interaction.dropableShapes.setStyle(dropableShapeDefaultStyle),Interaction.generateRandomShapes(b*.2,c*.1,b*.6,c*.8),Interaction.paper={width:500,height:300},Interaction.preventDrag=!1,Interaction.status==null||Interaction.status=="undefined"?(Interaction.status=document.createElement("div"),Interaction.status.className="status_true",$(Interaction.status).css({position:"absolute",top:""+(c-20)+"px",left:"0px","padding-left":"20px"}),Interaction.container.appendChild(Interaction.status)):Interaction.setStatus("");if(Interaction.viewDrawCalled==null||Interaction.viewDrawCalled=="undefined")paper.view.draw(),Interaction.viewDrawCalled=!0;var d=new Tool;d.setHitTestOptions({fill:!0,stroke:!0,segments:!0,tolerance:2,"class":"draggable"}),d.onMouseDown=function(a){a.item&&(d.shape=a.item,a.item.start())},d.onMouseDrag=function(a){d.shape&&d.shape.move(a.delta.x,a.delta.y,a.point.x,a.point.y)},d.onMouseUp=function(a){d.shape&&d.shape.up(),d.shape=null},d.activate()};var start=function(){this.ox=this.position.x,this.oy=this.position.y,this.hitShape=null,this.odx=0,this.ody=0;var a=$(Interaction.container).offset();this.s_left=a.left,this.s_top=a.top,this.inDropableShape=!1;if(this.preventDrag==null||this.preventDrag=="undefined")this.preventDrag=!1;return!0},move=function(a,b,c,d){if(this.preventDrag==1)return;this.odx+=a,this.ody+=b,Interaction.dropableShapes.setStyle(dropableShapeDefaultStyle),this.position=[this.position.x+a,this.position.y+b];var e=project.activeLayer.hitTest([c,d],{fill:!0,stroke:!0,segments:!0,tolerance:2,"class":"dropableShape"});return e?(this.inDropableShape=!0,this.hitShape=e.item,this.hitShape.setStyle(dropableShapeHoverStyle)):(this.inDropableShape=!1,this.hitShape=null),!0},up=function(){if(this.preventDrag==1)return;this.preventDrag=!0,Interaction.dropableShapes.setStyle(dropableShapeDefaultStyle);var a=!1;this.inDropableShape==1?this.hitShape.numberOfEdges===this.numberOfEdges?(this.remove(),this.class=null,this.hitShape.setStyle(dropableShapeDroppedTrueStyle),setTimeout(function(){Interaction.dropableShapes.setStyle(dropableShapeDefaultStyle)},400)):(a=!0,this.hitShape.setStyle(dropableShapeDroppedFalseStyle),setTimeout(function(){Interaction.dropableShapes.setStyle(dropableShapeDefaultStyle)},400)):a=!0;if(a==1){var b=Math.sqrt(this.odx*this.odx+this.ody*this.ody),c=1,d=b/c;this.animate({style:{position:new Point(this.ox,this.oy)},duration:d,callback:this.callback})}var e=!1;for(var f=0;f<Interaction.shapes.length;f++)Interaction.shapes[f].class=="draggable"&&(e=!0);e==0&&Interaction.setStatus('Tebrikler bütün çokgenleri doğru şekilde yerleştirdiniz. <input type="button" onclick="Interaction.init(Interaction.container);" value="Baştan Başla" class="control_button"/>')};Interaction.generateRandomShapes=function(a,b,c,d){Interaction.shapes=[];var e=c*.2,f=d*.3;do{var g,h,i,j,k=Interaction.findSpace(c,d);g=k.x+a,h=k.y+b,Interaction.shapeType=Math.floor(Math.random()*6),i=e*.7,j=f*.7;var l={},m,n;Util.rand01()==0?m=!0:m=!1;switch(Interaction.shapeType){case 0:j=i=Math.min(i,j);if(m==0)while(j==i||j>f)j=Math.floor(Math.random()*2)*10+i-20;l=new Path.Rectangle(new Point(g,h),new Size(i,j)),n=4;break;case 1:var o,p,q;o=p=q=5,m==0&&(Util.rand01()==0?(o=4,p=3):(o=3,p=4)),l=new Triangle(o,p,q,g,h,i,j),n=3;break;case 2:m==0?l=pentagon(new Point(g,h),new Size(i,j)):l=regularpentagon(new Point(g,h),new Size(i,j)),n=5;break;case 3:m==0?l=hexagon(new Point(g,h),new Size(i,j)):l=regularhexagon(new Point(g,h),new Size(i,j)),n=6;break;case 4:if(m==1)continue;l=new Path.Rhomboid(new Point(g,h+j*.1),new Size(i*.8,j*.7),i*.2),n=4;break;case 5:if(m==1)continue;l=new Path.Rhombus(new Point(g,h+j*.1),new Size(i,j*.7)),n=4}l.numberOfEdges=n,l.class="draggable",l.style=shapeStyle,l.start=start,l.move=move,l.up=up,l.callback=function(){this.preventDrag=!1},l.order=Interaction.shapes.length,Interaction.shapes.push(l)}while(Interaction.shapes.length<20)},Interaction.createDropableShape=function(a,b,c,d,e){var f=new Path.Oval(new Rectangle(new Point(a,b),new Size(c,d)));f.class="dropableShape";var g=new PointText(new Point(a+c*.5-20,b+d*.5+5));return g.style=textStyle,g.content=e,f},Interaction.createDropableShapesLeft=function(a,b,c,d){var e,f,g,i,j;w=c*.9,h=c*.8,e=a+(c-w)*.5,f=b+(d-h*2)*.5,Interaction.dropableShapes.triangle=Interaction.createDropableShape(e,f,w,h,"Üçgen"),Interaction.dropableShapes.triangle.numberOfEdges=3,Interaction.dropableShapes.rectangle=Interaction.createDropableShape(e,f+h*1.2,w,h,"Dörtgen"),Interaction.dropableShapes.rectangle.numberOfEdges=4},Interaction.createDropableShapesRight=function(a,b,c,d){var e,f,g,i,j;j=Math.min(c,d),w=j*.9,h=j*.8,e=a+(c-w)*.5,f=b+(d-h*2)*.5,Interaction.dropableShapes.pentagon=Interaction.createDropableShape(e,f,w,h,"Beşgen"),Interaction.dropableShapes.pentagon.numberOfEdges=5,Interaction.dropableShapes.hexagon=Interaction.createDropableShape(e,f+h*1.2,w,h,"Altıgen"),Interaction.dropableShapes.hexagon.numberOfEdges=6},Interaction.findSpace=function(a,b){var c=Interaction.shapes.length,d={x:Math.floor(c%5)*a*.2,y:Math.floor(c/5)*b*.3};return d},Interaction.setStatus=function(a){Interaction.status.innerHTML=a};