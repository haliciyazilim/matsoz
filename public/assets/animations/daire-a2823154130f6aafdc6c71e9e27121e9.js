// JavaScript Document
/*Styles*/
function Compass(a,b){this.defaultX=a,this.defaultY=b,this.left=new Raster("compass_left_leg"),this.right=new Raster("compass_right_leg"),this.knuckle=new Raster("compass_knuckle"),this.R=this.left.size.height,this.group=new Group,this.group.addChild(this.left),this.group.addChild(this.right),this.group.addChild(this.knuckle),this.left.position=[a,b-this.left.size.height*.5],this.knuckle.position=[a+this.left.size.width*.5,b-this.left.size.height-this.knuckle.size.height*.5],this.right.position=[a+this.left.size.width,b-this.right.size.height*.5],this.d=this.right.position.x-this.left.position.x,this.remove=function(){this.left.remove(),this.right.remove(),this.knuckle.remove()},this.changeDelta=function(a){var b=Math.acos(this.d/(2*this.R)),c=Math.acos((this.d+a)/(2*this.R)),d=Util.radianToDegree(b)-Util.radianToDegree(c),e=this.R*(Math.sin(b)-Math.sin(c));this.left.rotate(d,[this.defaultX,this.defaultY]),this.right.rotate(-d,[this.defaultX+this.d,this.defaultY]),this.knuckle.position.y+=e,this.right.position.x+=a,this.knuckle.position.x+=a/2,this.d+=a},this.rotate=function(a,b){this.left.rotate(a,b),this.right.rotate(a,b),this.knuckle.rotate(a,b)}}var textStyle={"font-size":"16px","text-color":"#55f"},lineStyle={strokeColor:"#000",strokeWidth:1},circleStyle={strokeColor:"#000",fillColor:"rgb(242,221,179)"},angleStyle={"stroke-width":"2px"},Animation=function(){};Animation();var Interaction=function(){};Interaction(),Interaction.getFramework=function(){return"paper"},Interaction.images=[{id:"ruler",src:"/assets/animations/ruler.png"},{id:"compass_left_leg",src:"/assets/animations/compass_left_leg.png"},{id:"compass_knuckle",src:"/assets/animations/compass_knuckle.png"},{id:"compass_right_leg",src:"/assets/animations/compass_right_leg.png"},{id:"paper",src:"/assets/animations/daire/paper.png"},{id:"scissor",src:"/assets/animations/daire/scissor.png"},{id:"scissor_half",src:"/assets/animations/daire/scissor_half.png"}],Interaction.init=function(a){Main.setObjective("Aşağıdaki cetvel ve pergeli kullanarak seçeceğiniz yarıçap uzunluğuna sahip çemberi aşağıdaki “Çiz” düğmesine tıklayarak çiziniz. Daha sonra daire oluşturunuz."),Interaction.container=a,Interaction.paper={width:$(a).width(),height:$(a).height()},Interaction.button=document.createElement("input"),Interaction.button.type="button",Interaction.button.value="Çiz",Interaction.button.onclick=Interaction.drawCircle,Interaction.button.className="control_button",$(Interaction.button).css({position:"absolute",top:"30px",left:Interaction.paper.width*.5}),Interaction.container.appendChild(Interaction.button),Interaction.radius=document.createElement("div"),$(Interaction.radius).css({position:"absolute",top:Interaction.paper.height*.4,left:Interaction.paper.width*.3,width:"30px",height:"30px"}),Interaction.container.appendChild(Interaction.radius),Interaction.status=document.createElement("div"),Interaction.status.className="status_true",$(Interaction.status).css({position:"absolute",left:10,top:Interaction.paper.height*.3,width:"40%"}),Interaction.container.appendChild(Interaction.status),Interaction.drawCircle.x=Interaction.paper.width*.63,Interaction.drawCircle.y=Interaction.paper.height*.55,Interaction.nextQuestion()},Interaction.nextQuestion=function(){Interaction.status.innerHTML="",$(Interaction.radius).show(),Interaction.r=null,Interaction.drawRuler(),Interaction.initCompass(),Interaction.circlePaper=new Raster("paper"),Interaction.circlePaper.position=new Point(Math.floor(Interaction.drawCircle.x)+.5,Math.floor(Interaction.drawCircle.y)+.5),Interaction.pause=!1,$(Interaction.button).show(),Interaction.showCircularRegion.circle&&Interaction.showCircularRegion.circle.remove()},Interaction.pause=!1,Interaction.setRadius=function(a){Interaction.r=a,Interaction.radius.innerHTML=Util.numberTurkishFloating(a/Interaction.br,1)},Interaction.drawCircle=function(){if(Interaction.pause===!0)return;$(Interaction.radius).hide(),Interaction.status.innerHTML="",$(Interaction.button).hide(),Interaction.compass.remove(),Interaction.ruler.remove(),Interaction.splitCircularRegion.circle&&Interaction.splitCircularRegion.circle.remove(),Interaction.pause=!0;var a,b,c,d,e,f,g,h;Interaction.t&&clearInterval(Interaction.t),Interaction.drawCircle.compass&&Interaction.drawCircle.compass.remove(),Interaction.drawCircle.compass=new Compass(Interaction.drawCircle.x,Interaction.drawCircle.y),Interaction.drawCircle.compass.changeDelta(Interaction.r-Interaction.drawCircle.compass.right.bounds.width),Interaction.drawCircle.compass.group.opacity=0,Interaction.drawCircle.compass.group.animate({style:{opacity:1},duration:500}),Interaction.scissor&&Interaction.scissor.remove(),Interaction.drawCircle.textO&&Interaction.drawCircle.textO.remove(),Interaction.drawCircle.textR&&Interaction.drawCircle.textR.remove(),Interaction.drawCircle.lineR&&Interaction.drawCircle.lineR.remove(),Interaction.drawCircle._o=20,Interaction.animationStarted=(new Date).getTime(),Interaction._o_old=0,Interaction.drawCircle.t=setInterval(function(){var a=(new Date).getTime()-Interaction.animationStarted;Interaction.drawCircle._o=a*.22,Interaction.drawCircle._o>=360&&(clearTimeout(Interaction.drawCircle.t),Interaction.drawCircle._o=359.9,Interaction.pause=!1,Interaction.drawCircle.textO=new PointText(new Point(Interaction.drawCircle.x-10,Interaction.drawCircle.y+10)),Interaction.drawCircle.textO.content="O",Interaction.drawCircle.textR=new PointText(new Point(Interaction.drawCircle.x+Interaction.r*.2,Interaction.drawCircle.y+15)),Interaction.drawCircle.textR.content="r = "+Interaction.radius.innerHTML,Interaction.drawCircle.lineR=new Path.Line(new Point(Interaction.drawCircle.x,Interaction.drawCircle.y),new Point(Interaction.drawCircle.x+Interaction.r,Interaction.drawCircle.y)),Interaction.drawCircle.lineR.setStyle(lineStyle),Interaction.drawCircle.textO.opacity=0,Interaction.drawCircle.textO.animate({style:{opacity:1},duration:1e3}),Interaction.drawCircle.textR.opacity=0,Interaction.drawCircle.textR.animate({style:{opacity:1},duration:1e3}),Interaction.drawCircle.lineR.opacity=0,Interaction.drawCircle.lineR.animate({style:{opacity:1},duration:1e3}),Interaction.drawCircle.compass.group.opacity=1,Interaction.drawCircle.compass.group.animate({style:{opacity:0},duration:500}),Interaction.scissor=new Raster("scissor"),Interaction.scissor.position=new Point(Math.floor(Interaction.drawCircle.x+Interaction.br*9+Interaction.scissor.bounds.width*.5)+5,Math.floor(Interaction.drawCircle.y+Interaction.scissor.bounds.height*.5)),Interaction.status.innerHTML="O merkezli ve "+Interaction.radius.innerHTML+" birim yarıçaplı çember. Daire elde etmek icin makasa tiklayiniz.",Interaction.scissor.tool=new Tool,Interaction.scissor.tool.onMouseDown=function(a){Interaction.scissor.bounds.contains(a.point)==1&&Interaction.splitCircularRegion()},Interaction.scissor.tool.activate());var b=Interaction.drawCircle.x+Interaction.r*Math.cos(Util.degreeToRadians(Interaction.drawCircle._o)),c=Interaction.drawCircle.y+Interaction.r*Math.sin(Util.degreeToRadians(Interaction.drawCircle._o));Interaction.drawCircle.circle&&Interaction.drawCircle.circle.remove();var d=new Point(Interaction.drawCircle.x,Interaction.drawCircle.y),e=Interaction.r,f=Util.degreeToRadians(0),g=Util.degreeToRadians(Interaction.drawCircle._o);Interaction.drawCircle.compass.rotate(-Interaction._o_old+Interaction.drawCircle._o,d);var h=new Point(d.x+Math.cos(f)*e,d.y+Math.sin(f)*e),i=new Point(d.x+Math.cos((f+g)/2)*e,d.y+Math.sin((f+g)/2)*e),j=new Point(d.x+Math.cos(g)*e,d.y+Math.sin(g)*e);Interaction.drawCircle.circle=new Path.Arc(h,i,j),Interaction.drawCircle.circle.setStyle(circleStyle),Interaction.drawCircle.circle.opacity=Interaction.drawCircle._o>200?1:Interaction.drawCircle._o/200,Interaction._o_old=Interaction.drawCircle._o,Interaction.drawCircle.circle.moveBelow(Interaction.drawCircle.compass.group),Interaction.circlePaper.moveBelow(Interaction.drawCircle.circle)},1)},Interaction.showCircularRegion=function(){function a(){var a=(new Date).getTime()-Interaction.showCircularRegion.startTime;a*=.2;if(a>360){clearInterval(Interaction.showCircularRegion.t),Interaction.status.innerHTML+=' <input type="button" class="control_button" value="Yeniden çizdir" onclick="Interaction.nextQuestion()">';return}var b=Interaction.r*Math.cos(Util.degreeToRadian(a));Interaction.showCircularRegion.circle&&Interaction.showCircularRegion.circle.remove(),Interaction.showCircularRegion.circle=new Path.Oval(new Rectangle(new Point(Interaction.drawCircle.x-b,Interaction.drawCircle.y-Interaction.r),new Size(b*2,Interaction.r*2))),a>90&&a<270?Interaction.showCircularRegion.circle.setStyle({strokeColor:"#000",fillColor:"#aaa"}):Interaction.showCircularRegion.circle.setStyle(circleStyle)}Interaction.scissor_half.remove(),Interaction.circlePaper.remove(),Interaction.status.innerHTML="O merkezli ve "+Interaction.radius.innerHTML+" birim yarıçaplı daire. <br />",Interaction.splitCircularRegion.circle&&Interaction.splitCircularRegion.circle.remove(),setTimeout(function(){Interaction.drawCircle.circle.remove(),Interaction.showCircularRegion.startTime=(new Date).getTime(),a(),Interaction.showCircularRegion.t=setInterval(a,40)},300)},Interaction.splitCircularRegion=function(){Interaction.status.innerHTML="",Interaction.scissor.tool.remove(),Interaction.scissor.remove(),Interaction.drawCircle.textO&&Interaction.drawCircle.textO.remove(),Interaction.drawCircle.textR&&Interaction.drawCircle.textR.remove(),Interaction.drawCircle.lineR&&Interaction.drawCircle.lineR.remove(),Interaction.scissor_half=new Raster("scissor_half"),Interaction.scissor_half.position=[Interaction.drawCircle.x+Interaction.r,Interaction.drawCircle.y],Interaction.splitCircularRegion._o=20,Interaction.splitCircularRegion._o_old=0,Interaction.animationStarted=(new Date).getTime(),Interaction.splitCircularRegion.t=setInterval(function(){var a=(new Date).getTime()-Interaction.animationStarted;Interaction.splitCircularRegion._o=a*.22;if(Interaction.splitCircularRegion._o>360)return clearInterval(Interaction.splitCircularRegion.t),Interaction.showCircularRegion(),!1;Interaction.splitCircularRegion.circle&&Interaction.splitCircularRegion.circle.remove();var b=new Point(Interaction.drawCircle.x,Interaction.drawCircle.y),c=Interaction.r+1,d=Util.degreeToRadians(0),e=Util.degreeToRadians(-Interaction.splitCircularRegion._o);Interaction.scissor_half.rotate(+Interaction.splitCircularRegion._o_old-Interaction.splitCircularRegion._o,b),Interaction.splitCircularRegion._o_old=Interaction.splitCircularRegion._o;var f=new Point(b.x+Math.cos(d)*c,b.y+Math.sin(d)*c),g=new Point(b.x+Math.cos((d+e)/2)*c,b.y+Math.sin((d+e)/2)*c),h=new Point(b.x+Math.cos(e)*c,b.y+Math.sin(e)*c);Interaction.splitCircularRegion.circle=new Path.Arc(f,g,h),Interaction.splitCircularRegion.circle.setStyle(circleStyle),Interaction.splitCircularRegion.circle.setStyle({strokeColor:"#fff",strokeWidth:2,dashArray:[3,2]}),Interaction.splitCircularRegion.circle.moveBelow(Interaction.scissor_half)},25)},Interaction.initCompass=function(){Interaction.compass=new Compass(Interaction.ruler.bounds.x,Interaction.ruler.bounds.y),Interaction.compass.right.class="right_leg",Interaction.drawCompass(Interaction.br*2);var a=new Tool;a.drag=!1,a.onMouseDown=function(a){Interaction.compass.group.bounds.contains(a.point)&&(this.drag=!0)},a.onMouseDrag=function(a){this.drag===!0&&Interaction.pause==0&&Interaction.drawCompass(a.delta.x)},a.onMouseUp=function(){this.drag=!1},a.activate(),Interaction.tool=a},Interaction.drawCompass=function(a){if(a==null||a==undefined)a=0;if(Interaction.compass.d+a>Interaction.br*9||Interaction.compass.d+a<Interaction.br)return;Interaction.compass.changeDelta(a),Interaction.setRadius(Interaction.compass.d)},Interaction.drawRuler=function(){var a,b,c,d,e,f;a=Interaction.paper.width*.02,b=Interaction.paper.height*.4,Interaction.ruler=new Raster("ruler"),Interaction.ruler.position=[Math.floor(a+Interaction.ruler.size.width*.5),Math.floor(b+Interaction.ruler.size.height*.5)],Interaction.br=Math.floor(Interaction.ruler.size.width*.1);var g=b+d*.6,h=b+d*.4,i=b+d};