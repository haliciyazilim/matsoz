// JavaScript Document
/*Styles*/
function Triangle(a,b,c,d,e,f,g,h){this.i=a,this.j=b,this.k=c,this.p1={x:0,y:0},this.p2={x:0,y:0},this.p3={x:0,y:0},this.a1=null,this.a2=null,this.a3=null;var i=Math.min(f,g),j=i/Math.max(a,b,c);this.p1.x=d,this.p1.y=e+i,this.p2.x=this.p1.x+this.i*j,this.p2.y=this.p1.y;var i=Math.acos((this.i*this.i+this.k*this.k-this.j*this.j)/(2*this.i*this.k));return this.p3.x=this.p1.x+Math.cos(i)*c*j,this.p3.y=this.p1.y-Math.sin(i)*c*j,h.triangle(this.p1.x,this.p1.y,this.p2.x,this.p2.y,this.p3.x,this.p3.y).attr(shapeStyle)}function pentagon(a,b,c,d){var e=[10,70,150,200,300];return Interaction.paper.equiradialPolygon(a,b,c,d,e)}function regularpentagon(a,b,c,d){return Interaction.paper.regularPolygon(a,b,c,d,5)}function hexagon(a,b,c,d){var e=[10,50,100,150,200,300];return Interaction.paper.equiradialPolygon(a,b,c,d,e)}function regularhexagon(a,b,c,d){return Interaction.paper.regularPolygon(a,b,c,d,6)}var textStyle={"font-size":"16px","font-weight":"bold",fill:"#fff"},edgeStyle={"stroke-width":"2px"},angleStyle={fill:"#DDD"},shapeStyle={fill:"#fff"},dropableShapeHoverStyle={stroke:"#000",fill:"#dd9","stroke-width":2},dropableShapeDefaultStyle={stroke:"#999",fill:"rgb(146,208,80)","stroke-width":1},dropableShapeDroppedTrueStyle={stroke:"#0f0",fill:"#afa"},dropableShapeDroppedFalseStyle={stroke:"#f00",fill:"#f00"},Interaction=function(){};Interaction(),Interaction.init=function(a){Main.setObjective("Aşağıdaki çokgenlerden düzgün olanları seçiniz."),Interaction.paper=new Raphael(a,$(a).width(),$(a).height()),Interaction.container=a,$(Interaction.container).css("position","relative"),Interaction.status=document.createElement("div"),Interaction.status.className="status_true",$(Interaction.status).css({position:"absolute",top:""+Interaction.paper.height*.9+"px",left:"0px","padding-left":"20px"}),Interaction.container.appendChild(Interaction.status),Interaction.container.top=$(a).offset().top,Interaction.container.left=$(a).offset().left;var b=Interaction.paper.width,c=Interaction.paper.height;Interaction.createDropableShape(b*.8,0,b*.2,c),Interaction.generateRandomShapes(b*.05,c*.2,b*.7,c*.8),Interaction.preventDrag=!1},Interaction.generateRandomShapes=function(a,b,c,d){Interaction.shapes=Interaction.paper.set();var e=c*.2,f=d*.3,g=function(){this.x=this.data("x"),this.y=this.data("y"),this.odx=0,this.ody=0;var a=$(Interaction.container).offset();this.s_left=a.left,this.s_top=a.top,this.inDropableShape=!1;if(this.preventDrag==null||this.preventDrag=="undefined")this.preventDrag=!1;return!0},h=function(a,b,c,d){if(this.preventDrag==1)return;return this.toFront(),this.transform("T"+(-this.odx+a)+","+(-this.ody+b)+"..."),this.odx=a,this.ody=b,Interaction.dropableShape.isPointInside(c-this.s_left,d-this.s_top)?(this.inDropableShape=!0,Interaction.dropableShape.attr(dropableShapeHoverStyle)):(Interaction.dropableShape.attr(dropableShapeDefaultStyle),this.inDropableShape=!1),!0},i=function(){if(this.preventDrag==1)return;this.preventDrag=!0,Interaction.dropableShape.attr(dropableShapeDefaultStyle);var a=!1;this.inDropableShape==1?this.data("isRegular")===!0?(this.animate({opacity:.1},400,this.remove),this.data("isRegular",!1),Interaction.dropableShape.animate(dropableShapeDroppedTrueStyle,400,this.callback)):a=!0:a=!0;if(a==1){var b=Math.sqrt(this.odx*this.odx+this.ody*this.ody),c=1,d=b/c;Interaction.dropableShape.animate(dropableShapeDroppedFalseStyle,d),this.animate({transform:"T"+ -this.odx+","+ -this.ody+"..."},d*4,this.callback)}var e=!1;for(var f=0;f<Interaction.shapes.length;f++)Interaction.shapes[f]!="undefined"&&Interaction.shapes[f].data("isRegular")==1&&(e=!0);e==0&&Interaction.setStatus('Tebrikler bütün düzgün çokgenleri buldunuz. <input type="button" onclick="Interaction.container.innerHTML=null;Interaction.init(Interaction.container);" value="Baştan Başla" class="control_button"/>')};do{var j,k,l,m,n=Interaction.findSpace(c,d);j=n.x+a,k=n.y+b,Interaction.shapeType=Math.floor(Math.random()*6),l=e*.7,m=f*.7;var o,p;Util.rand01()==0?p=!0:p=!1;switch(Interaction.shapeType){case 0:m=l=Math.min(l,m);if(p==0)while(m==l||m>f)m=Math.floor(Math.random()*2)*10+l-20;o=Interaction.paper.rect(j,k,l,m).data({x:j,y:k,w:l,h:m});break;case 1:var q,r,s;q=r=s=5,p==0&&(Util.rand01()==0?(q=4,r=3):(q=3,r=4)),o=Triangle(q,r,s,j,k,l,m,Interaction.paper);break;case 2:p==0?o=pentagon(j,k,l,m):o=regularpentagon(j,k,l,m);break;case 3:p==0?o=hexagon(j,k,l,m):o=regularhexagon(j,k,l,m);break;case 4:if(p==1)continue;o=Interaction.paper.rhomboid(j,k+m*.1,l*.2,l*.8,m*.7);break;case 5:if(p==1)continue;o=Interaction.paper.rhombus(j,k+m*.1,l,m*.7)}o.data("isRegular",p),o.attr(shapeStyle),o.drag(h,g,i),o.callback=function(){Interaction.dropableShape.animate(dropableShapeDefaultStyle,200),this.preventDrag=!1},Interaction.shapes.push(o)}while(Interaction.shapes.length<15)},Interaction.createDropableShape=function(a,b,c,d){var e,f,g,h,i;e=a+c*.5,f=b+d*.5,i=Math.min(c,d),g=i*.45,h=i*.4,Interaction.dropableShape=Interaction.paper.ellipse(e,f,g,h).attr(dropableShapeDefaultStyle),Interaction.paper.text(e,f,"Düzgün\nçokgen").attr(textStyle).mouseover(function(){return!1})},Interaction.findSpace=function(a,b){var c=Interaction.shapes.length,d={x:Math.floor(c%5)*a*.2,y:Math.floor(c/5)*b*.3};return d},Interaction.setStatus=function(a){Interaction.status.innerHTML=a};