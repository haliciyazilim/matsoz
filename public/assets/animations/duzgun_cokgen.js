// JavaScript Document
/*Styles*/
function Triangle(a,b,c,d,e,f,g){this.i=a,this.j=b,this.k=c,this.p1={x:0,y:0},this.p2={x:0,y:0},this.p3={x:0,y:0},this.a1=null,this.a2=null,this.a3=null;var h=Math.min(f,g),i=h/Math.max(a,b,c);this.p1.x=d,this.p1.y=e+h,this.p2.x=this.p1.x+this.i*i,this.p2.y=this.p1.y;var h=Math.acos((this.i*this.i+this.k*this.k-this.j*this.j)/(2*this.i*this.k));return this.p3.x=this.p1.x+Math.cos(h)*c*i,this.p3.y=this.p1.y-Math.sin(h)*c*i,new Path.Triangle(this.p1,this.p2,this.p3)}function pentagon(a,b){var c=[10,70,150,200,300];return new Path.EquiradialPolygon(a,b,c)}function regularpentagon(a,b){return new Path.RegularPolygon(a,b,5)}function hexagon(a,b){var c=[10,50,100,150,200,300];return new Path.EquiradialPolygon(a,b,c)}function regularhexagon(a,b){return new Path.RegularPolygon(a,b,6)}var textStyle={fontSize:16,strokeColor:"#fff",strokeWidth:0,fillColor:"#fff"},edgeStyle={"stroke-width":"2px"},angleStyle={fill:"#DDD"},animationShapeStyle={strokeColor:"#000",strokeWidth:2},shapeStyle={strokeColor:"#000",strokeWidth:2,fillColor:"#fff"},dropableShapeHoverStyle={strokeColor:"#000",fillColor:"#dd9",strokeWidth:2},dropableShapeDefaultStyle={strokeColor:"#999",fillColor:"rgb(146,208,80)",strokeWidth:1},dropableShapeDroppedTrueStyle={strokeColor:"#0f0",fillColor:"#afa"},dropableShapeDroppedFalseStyle={strokeColor:"#f00",fillColor:"#f00"},Animation={images:[{id:"triangle_pattern",src:"/assets/animations/duzgun_cokgen/triangle.png"},{id:"square_pattern",src:"/assets/animations/duzgun_cokgen/square.png"},{id:"pentagon_pattern",src:"/assets/animations/duzgun_cokgen/pentagon.png"},{id:"hexagon_pattern",src:"/assets/animations/duzgun_cokgen/hexagon.png"}],init:function(a){function h(a,b,c){this.setAngles=function(a){if(!(a instanceof Array))throw"argument `angles` is not an array";this.angles=a},this.draw=function(){this.shape&&this.shape.remove(),this.shape=new Path.EquiradialPolygon(this.position,this.size,this.angles,0),this.shape.set_style(animationShapeStyle)},this.redraw=function(a){this.setAngles(a),this.draw()},this.position=a,this.size=b,c&&this.setAngles(c)}Animation.container=a;var b=$(a).width(),c=$(a).height(),d=b*.5,e=c*.5,f=10,g=new Size(150,170),i=new Point(0,27.5-f),j=new Point(b*.25,12-f),k=new Point(b*.5,4-Math.floor(f)),l=new Point(b*.75,0-f),m={animate:Item.prototype.animate,t1:150,t2:210,t3:330,s1:30,s2:150,s3:210,s4:330,p1:60,p2:90,p3:120,p4:200,p5:330,h1:30,h2:60,h3:150,h4:200,h5:210,h6:350};Animation.triangle=new h(i,g,[m.t1,m.t2,m.t3]),Animation.triangle.draw(),Animation.square=new h(j,g,[m.s1,m.s2,m.s3,m.s4]),Animation.square.draw(),Animation.pentagon=new h(k,g,[m.p1,m.p2,m.p3,m.p4,m.p5]),Animation.pentagon.draw(),Animation.hexagon=new h(l,g,[m.h1,m.h2,m.h3,m.h4,m.h5,m.h6]),Animation.hexagon.draw(),Animation.onFrame=function(a){Animation.triangle.redraw([m.t1,m.t2,m.t3]),Animation.square.redraw([m.s1,m.s2,m.s3,m.s4]),Animation.pentagon.redraw([m.p1,m.p2,m.p3,m.p4,m.p5]),Animation.hexagon.redraw([m.h1,m.h2,m.h3,m.h4,m.h5,m.h6])},m.animate({style:{t1:90},duration:1750,delay:600,animationType:"easeInEaseOut",callback:function(){$(Animation.container).append('<span style="position:absolute;bottom:10px;left:40px">Eşkenar Üçgen</span>');var a=new Raster("triangle_pattern");a.position=Animation.triangle.shape.centerPoint,a.opacity=0,a.animate({style:{opacity:1},duration:1e3,delay:500})}}),m.animate({style:{s1:45,s2:135,s3:225,s4:315},duration:1500,delay:700,animationType:"easeInEaseOut",callback:function(){$(Animation.container).append('<span style="position:absolute;bottom:10px;left:34%">Kare</span>');var a=new Raster("square_pattern");a.position=Animation.square.shape.centerPoint,a.opacity=0,a.animate({style:{opacity:1},duration:1e3,delay:500})}}),m.animate({style:{p1:18,p2:90,p3:162,p4:234,p5:306},duration:2e3,delay:750,animationType:"easeInEaseOut",callback:function(){$(Animation.container).append('<span style="position:absolute;bottom:10px;left:53.5%">Düzgün Beşgen</span>');var a=new Raster("pentagon_pattern");a.position=Animation.pentagon.shape.centerPoint,a.opacity=0,a.animate({style:{opacity:1},duration:1e3,delay:500})}}),m.animate({style:{h1:0,h2:60,h3:120,h4:180,h5:240,h6:300},duration:2500,delay:500,animationType:"easeInEaseOut",callback:function(){$(Animation.container).append('<span style="position:absolute;bottom:10px;left:78%">Düzgün Altıgen</span>');var a=new Raster("hexagon_pattern");a.position=Animation.hexagon.shape.centerPoint,a.opacity=0,a.animate({style:{opacity:1},duration:1e3,delay:500})}})}},Interaction=function(){};Interaction(),Interaction.getFramework=function(){return"paper"},Interaction.init=function(a){Main.setObjective("Yandaki çokgenlerden düzgün olanları seçiniz."),Interaction.container=a,Interaction.container.top=$(a).offset().top,Interaction.container.left=$(a).offset().left;var b=$(Interaction.container).width(),c=$(Interaction.container).height();Interaction.shuffledArray=null,project.activeLayer.removeChildren(),Interaction.createDropableShape(b*.75,0,b*.2,c),Interaction.shapeCount=0,Interaction.generateRandomShapes(20,20,b*.8,c-20),Interaction.paper={width:500,height:300},Interaction.preventDrag=!1,Interaction.status==null||Interaction.status=="undefined"?(Interaction.status=document.createElement("div"),Interaction.status.className="status_true",$(Interaction.status).css({position:"absolute",top:""+(c-40)+"px",left:"0px","padding-left":"20px"}),Interaction.container.appendChild(Interaction.status)):Interaction.setStatus("");var d=new Tool;d.onMouseDown=function(a){a.item&&(d.shape=a.item,a.item.start())},d.onMouseDrag=function(a){d.shape&&d.shape.move(a.delta.x,a.delta.y,a.point.x,a.point.y)},d.onMouseUp=function(a){d.shape&&d.shape.up(),d.shape=null},d.activate()};var start=function(){this.ox=this.position.x,this.oy=this.position.y,this.odx=0,this.ody=0;var a=$(Interaction.container).offset();this.s_left=a.left,this.s_top=a.top,this.inDropableShape=!1;if(this.preventDrag==null||this.preventDrag=="undefined")this.preventDrag=!1;return!0},move=function(a,b,c,d){if(this.preventDrag==1)return;this.odx+=a,this.ody+=b,Interaction.dropableShape.style=dropableShapeDefaultStyle,this.position=[this.position.x+a,this.position.y+b];var e=Interaction.dropableShape.hitTest([c,d]);return e?(this.inDropableShape=!0,Interaction.dropableShape.style=dropableShapeHoverStyle):(Interaction.dropableShape.style=dropableShapeDefaultStyle,this.inDropableShape=!1),!0},up=function(){if(this.preventDrag==1)return;this.preventDrag=!0,Interaction.dropableShape.style=dropableShapeDefaultStyle;var a=!1;this.inDropableShape==1?this.isRegular===!0?(this.remove(),this.isRegular=!1,Interaction.dropableShape.style=dropableShapeDroppedTrueStyle,setTimeout(function(){Interaction.dropableShape.style=dropableShapeDefaultStyle},400)):(a=!0,Interaction.dropableShape.style=dropableShapeDroppedFalseStyle,setTimeout(function(){Interaction.dropableShape.style=dropableShapeDefaultStyle},400)):a=!0;if(a==1){var b=Math.sqrt(this.odx*this.odx+this.ody*this.ody),c=1,d=b/c;this.animate({style:{position:new Point(this.ox,this.oy)},duration:d,callback:this.callback})}var e=!1;for(var f=0;f<Interaction.shapes.length;f++)Interaction.shapes[f]!="undefined"&&Interaction.shapes[f].isRegular==1&&(e=!0);e==0&&Interaction.setStatus('Tebrikler bütün düzgün çokgenleri buldunuz. <input type="button" onclick="Interaction.init(Interaction.container);" value="Baştan Başla" class="control_button"/>')};Interaction.generateRandomShapes=function(a,b,c,d){Interaction.shapes=[];var e=c*.25,f=d*.3;do{var g,h,i,j,k=Interaction.findSpace(c,d);g=k.x+a,h=k.y+b,i=e*.7,j=f*.8;var l,m,n=12;Interaction.shapeCount=Interaction.shapeCount%n;if(Interaction.shuffledArray==null||Interaction.shuffledArray==undefined)Interaction.shuffledArray=Util.getShuffledArray(n);Interaction.shapeType=Interaction.shuffledArray[Interaction.shapeCount++];switch(Interaction.shapeType){case 0:var o=Math.min(i,j);l=new Path.Rectangle(new Point(g+o*.15,h+o*.15),new Size(o*.7,o*.7)),m=!0;break;case 1:j=i=Math.min(i,j);while(j==i||j>f)j=-Math.floor(Math.random()*3)*30+i+30;l=new Path.Rectangle(new Point(g+10,h+10),new Size(i,j)),m=!1;break;case 2:var o,p,q;o=p=q=5,l=new Triangle(o,p,q,g,h,i,j),m=!0;break;case 3:var o,p,q;o=p=q=5,o=3,p=4,l=new Triangle(o,p,q,g,h,i,j),m=!1;break;case 4:l=pentagon(new Point(g,h),new Size(i,j)),m=!1;break;case 5:l=regularpentagon(new Point(g,h),new Size(i,j)),m=!0;break;case 6:l=hexagon(new Point(g,h),new Size(i,j)),m=!1;break;case 7:l=regularhexagon(new Point(g,h),new Size(i,j)),m=!0;break;case 8:l=new Path.Rhomboid(new Point(g,h+j*.1),new Size(i*.6,j*.7),i*.2),m=!1;break;case 9:l=new Path.Rhombus(new Point(g+i*.1,h+j*.1),new Size(i*.8,j*.7)),m=!1;break;case 10:var o,p,q;o=p=q=5,o=6,p=8,l=new Triangle(o,p,q,g,h,i,j),m=!1;break;case 11:var o,p,q;o=p=q=5,o=4,p=3,l=new Triangle(o,p,q,g,h,i,j),m=!1}l.isRegular=m,l.style=shapeStyle,l.start=start,l.move=move,l.up=up,l.callback=function(){this.preventDrag=!1},l.order=Interaction.shapes.length,Interaction.shapes.push(l)}while(Interaction.shapes.length<12)},Interaction.createDropableShape=function(a,b,c,d){var e,f,g,i,j;j=Math.min(c,d),w=j*.9,h=j*.8,e=a+(c-w)*.5,f=b+(d-h)*.5,Interaction.dropableShape=new Path.Oval(new Rectangle(new Point(e,f),new Size(w,h))),Interaction.dropableShape.style=dropableShapeDefaultStyle;var k=new PointText(new Point(e+w*.2,f+h*.4));k.style=textStyle,k.content="Düzgün";var k=new PointText(new Point(e+w*.2,f+h*.4+20));k.style=textStyle,k.content="Çokgen"},Interaction.findSpace=function(a,b){var c=Interaction.shapes.length,d={x:Math.floor(c%4)*a*.2,y:Math.floor(c/4)*b*.3};return d},Interaction.setStatus=function(a){$(Interaction.status).hide(),Interaction.status.innerHTML=a,$(Interaction.status).show()};