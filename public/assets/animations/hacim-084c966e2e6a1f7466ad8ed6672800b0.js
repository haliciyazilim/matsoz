function UnitCube(a,b,c){this.x=a,this.y=b,this.z=c,this.draw=function(a,b,c){this.shape&&this.shape.remove(),this.shape=new Path.Cube(a,b,new Point(c.xZ,c.yZ)),this.shape.set_style(cubeStyle)}}var cubeStyle={strokeColor:"#000",strokeWidth:1,fillColor:"#ffd9d9"},Animation={init:function(a){Main.animationProject.activeLayer.removeChildren(),Animation.container=a,Animation.xZ=.4,Animation.yZ=.5;var b=$(a).width(),c=$(a).height(),d=100,e=20;Animation.a=30,Animation.xCube=7,Animation.yCube=2,Animation.zCube=4,Animation.rectPrizm=(new Path.RectanglePrisim(new Point(d,e),new Size(Animation.xCube*Animation.a,Animation.yCube*Animation.a),new Size(Animation.zCube*Animation.xZ*Animation.a,Animation.zCube*Animation.yZ*Animation.a))).set_style({strokeWidth:2,strokeColor:"#000"});var f=document.createElement("div");$(a).append(f),$(f).css({position:"absolute",top:"50px",right:"200px",lineHeight:"30px",textAlign:"center"}).html('Dikdörtgenler prizmasının <br/> hacmi <br/> <span id="count"></span> birim küptür.'),Animation.countSpan=$("span#count",f).get(0),Animation.zeroPoint=new Point(d+(Animation.zCube-1)*Animation.xZ*Animation.a,e+(Animation.yCube-1)*Animation.a),Animation.cubes=[];for(var g=0;g<Animation.xCube;g++)for(var h=0;h<Animation.yCube;h++)for(var i=0;i<Animation.zCube;i++)Animation.cubes.push(new UnitCube(g,h,i));UnitCube.drawCubes(Animation.cubes,Animation.zeroPoint,Animation.a,Animation),Animation.cubes[0].shape.insertBelow(Animation.rectPrizm.children[4]);for(var g=1;g<Animation.cubes.length;g++)Animation.cubes[g].shape.opacity=0,Animation.cubes[g].shape.insertAbove(Animation.cubes[g-1].shape),Animation.cubes[g].shape.__i=g+1,Animation.cubes[g].shape.animate({style:{opacity:1},duration:1,delay:g*100,callback:function(){$(Animation.countSpan).html(this.__i)}})}},Interaction={getFramework:function(){return"paper"},init:function(a){Interaction.container=a,Main.setObjective("Yandaki yapının hacminin kaç birim küp olduğunu bulunuz ve kontrol ediniz."),Interaction.paper={width:$(a).width(),height:$(a).height()},Interaction.xZ=.4,Interaction.yZ=.5,Interaction.appendInput({position:"static"}),Interaction.appendButton({top:"170px",right:"95px"}),Interaction.appendStatus({top:"210px",right:"20px"});var b=document.createElement("div");$(a).append(b),$(b).append("Bu yapının hacmi&emsp;").append(Interaction.input).append("&emsp;birim küptür.").css({position:"absolute",top:"130px",right:"20px"}),Interaction.xCubes=0,Interaction.yCubes=0,Interaction.zCubes=0,Interaction.zeroPoint=new Point(120,160),Interaction.a=30,Interaction.prepareNextQuestion()},nextQuestion:function(){if(Interaction.pause==1)return;Interaction.pause=!1,Main.interactionProject.activeLayer.removeChildren();var a=Interaction.zeroPoint,b=Interaction.a,c=[],d,e,f;do e=Math.floor(Math.random()*4)+3;while(Interaction.xCubes==e);do f=Math.floor(Math.random()*3)+1;while(Interaction.yCubes==f);do d=Math.floor(Math.random()*7)+1;while(d/4>e-2||Interaction.zCubes==d);Interaction.xCubes=e,Interaction.yCubes=f,Interaction.zCubes=d;for(var g=0;g<e;g++)c.push(new UnitCube(g-1,0,0));for(var g=0;g<f;g++)c.push(new UnitCube(0,g+1,0));for(var g=0;g<d;g++)c.push(new UnitCube(Math.floor(g/3),0,g%3+1));Interaction.cubes=c,UnitCube.drawCubes(c,a,b,Interaction)},showCubes:function(a){if(Interaction.pause==1)return;Interaction.pause=!0;var b=new AnimationHelper({distance:0,update:function(){UnitCube.explode(Interaction.cubes,Interaction.zeroPoint,Interaction.a,this.distance,Interaction)}});b.animate({style:{distance:a},duration:1e3,update:b.update,callback:function(){Interaction.pause=!1}})},isAnswerCorrect:function(a){return a==Interaction.cubes.length?!0:!1},onCorrectAnswer:function(){Interaction.showCubes(20)},onWrongAnswer:function(){},onFail:function(){Interaction.setStatus("Yanlış cevap, doğrusu "+Interaction.cubes.length+" olacaktı.",!1),Interaction.showCubes(20)}};UnitCube.compare=function(a,b){return a.z>b.z?1:a.z<b.z?-1:a.y>b.y?1:a.y<b.y?-1:a.x>b.x?1:a.x<b.x?-1:0},UnitCube.drawCubes=function(a,b,c,d){a.sort(UnitCube.compare);for(var e=0;e<a.length;e++){var f=b.add(Math.floor(a[e].x*c)+.5,Math.floor(-a[e].y*c)+.5);f=f.add(Math.floor(-a[e].z*c*d.xZ),Math.floor(a[e].z*c*d.yZ)),a[e].draw(f,c,d)}},UnitCube.explode=function(a,b,c,d,e){a.sort(UnitCube.compare);for(var f=0;f<a.length;f++){var g=b.add(a[f].x*c,-a[f].y*c);g=g.add(-a[f].z*c*e.xZ,a[f].z*c*e.yZ),g=g.add(d*a[f].x,0),g=g.add(0,-d*a[f].y),g=g.add(-a[f].z*d*e.xZ,a[f].z*d*e.yZ),a[f].draw(g,c,e)}};