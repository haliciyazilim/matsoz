function UnitCube(a,b,c){this.x=a,this.y=b,this.z=c,this.draw=function(a,b,c,d){this.shape&&this.shape.remove(),this.shape=new Path.Cube(a,b,new Point(c.xZ,c.yZ)),d?this.shape.set_style(d):this.shape.set_style(cubeStyle)}}var cubeStyle={strokeColor:"#255b63",strokeWidth:1,fillColor:"#bfe8ef"},animationCubeStyle={strokeColor:"#666",strokeWidth:1,fillColor:"#ddd"},Animation={init:function(a){Main.animationProject.activeLayer.removeChildren(),Animation.container=a,Animation.xZ=.4,Animation.yZ=.5;var b=$(a).width(),c=$(a).height(),d=100,e=20;Animation.a=30,Animation.xCube=7,Animation.yCube=2,Animation.zCube=4,Animation.rectPrizm=(new Path.RectanglePrisim(new Point(d,e),new Size(Animation.xCube*Animation.a,Animation.yCube*Animation.a),new Size(Animation.zCube*Animation.xZ*Animation.a,Animation.zCube*Animation.yZ*Animation.a))).set_style({strokeWidth:2,strokeColor:"#000"});var f=document.createElement("div");$(a).append(f),$(f).css({position:"absolute",top:"50px",right:"200px",lineHeight:"30px",textAlign:"center",fontSize:"16px"}).html('Dikdörtgenler prizmasının <br/> hacmi <br/> <span id="count" style="font-weight:bold"></span> birim küptür.'),Animation.countSpan=$("span#count",f).get(0),Animation.zeroPoint=new Point(d+(Animation.zCube-1)*Animation.xZ*Animation.a,e+(Animation.yCube-1)*Animation.a),Animation.cubes=[];for(var g=0;g<Animation.xCube;g++)for(var h=0;h<Animation.yCube;h++)for(var i=0;i<Animation.zCube;i++)Animation.cubes.push(new UnitCube(g,h,i));UnitCube.drawCubes(Animation.cubes,Animation.zeroPoint,Animation.a,Animation,animationCubeStyle),Animation.cubes[0].shape.insertBelow(Animation.rectPrizm.children[4]);for(var g=1;g<Animation.cubes.length;g++)Animation.cubes[g].shape.opacity=0,Animation.cubes[g].shape.insertAbove(Animation.cubes[g-1].shape),Animation.cubes[g].shape.__i=g+1,Animation.cubes[g].shape.animate({style:{opacity:1},duration:1,delay:g*100,callback:function(){$(Animation.countSpan).html(this.__i)}});Main.animationFinished(5e3)}},Interaction={getFramework:function(){return"paper"},init:function(a){Interaction.container=a,Main.setObjective("Yandaki yapının hacminin kaç birim küp olduğunu bulunuz ve kontrol ediniz."),Interaction.paper={width:$(a).width(),height:$(a).height()},Interaction.xZ=.4,Interaction.yZ=.5,Interaction.appendInput({position:"static"}),Interaction.appendButton({top:"170px",right:"95px"}),Interaction.appendStatus({top:"220px",right:"20px",width:"250px",textAlign:"center"});var b=document.createElement("div");$(a).append(b),$(b).append("Bu yapının hacmi&emsp;").append(Interaction.input).append("&emsp;birim küptür.").css({position:"absolute",top:"130px",right:"20px"}),Interaction.setRandomGenerator(5),Interaction.xCubes=0,Interaction.yCubes=0,Interaction.zCubes=0,Interaction.zeroPoint=new Point(120,160),Interaction.a=30,Interaction.prepareNextQuestion()},nextQuestion:function(a){if(Interaction.pause==1)return;Interaction.pause=!1,Main.interactionProject.activeLayer.removeChildren();var b=Interaction.zeroPoint,c=Interaction.a,d,e,f;do e=Math.floor(Math.random()*4)+3;while(Interaction.xCubes==e);do f=Math.floor(Math.random()*3)+1;while(Interaction.yCubes==f);do d=Math.floor(Math.random()*3)+1;while(d/4>e-2||Interaction.zCubes==d);Interaction.xCubes=e,Interaction.yCubes=f,Interaction.zCubes=d,Interaction.cubes=Interaction.generateShape(a),UnitCube.drawCubes(Interaction.cubes,b,c,Interaction)},generateShape:function(a){var b=[];switch(a){case 0:for(var c=0;c<Interaction.xCubes;c++)b.push(new UnitCube(c-1,2,0));for(var c=0;c<Interaction.yCubes;c++)b.push(new UnitCube(0,2-(c+1),0));for(var c=0;c<Interaction.zCubes;c++)b.push(new UnitCube(-Math.floor(c/3),2,c%3+1));break;case 1:for(var c=0;c<Interaction.xCubes;c++)b.push(new UnitCube(c-1,2,2));for(var c=0;c<Interaction.yCubes;c++)b.push(new UnitCube(0,2-(c+1),2));for(var c=0;c<Interaction.zCubes;c++)b.push(new UnitCube(-Math.floor(c/3),2,-c%3+1));break;case 2:for(var c=0;c<Interaction.xCubes;c++)b.push(new UnitCube(c-1,0,0));for(var c=0;c<Interaction.yCubes;c++)b.push(new UnitCube(0,c+1,0));for(var c=0;c<Interaction.zCubes;c++)b.push(new UnitCube(c-1,0,1));break;case 3:for(var c=0;c<Interaction.xCubes;c++)b.push(new UnitCube(-1,c-1,0));b.push(new UnitCube(0,0,0));for(var c=0;c<Interaction.zCubes;c++)b.push(new UnitCube(1,c-1,0));break;case 4:for(var c=0;c<Interaction.yCubes;c++)b.push(new UnitCube(-c,0,1));for(var c=0;c<Interaction.yCubes;c++)b.push(new UnitCube(0,c,0));for(var c=0;c<Interaction.zCubes;c++)b.push(new UnitCube(c,0,3));b.push(new UnitCube(0,0,2))}return b},showCubes:function(a){if(Interaction.pause==1)return;Interaction.pause=!0;var b=new AnimationHelper({distance:0,update:function(){UnitCube.explode(Interaction.cubes,Interaction.zeroPoint,Interaction.a,this.distance,Interaction)}});b.animate({style:{distance:a},duration:1e3,update:b.update,callback:function(){Interaction.pause=!1}})},isAnswerCorrect:function(a){return a==Interaction.cubes.length?!0:!1},onCorrectAnswer:function(){Interaction.showCubes(20)},onWrongAnswer:function(){},onFail:function(){Interaction.setStatus("Yanlış cevap, doğrusu "+Interaction.cubes.length+" olacaktı.",!1),Interaction.showCubes(10)}};UnitCube.compare=function(a,b){return a.z>b.z?1:a.z<b.z?-1:a.y>b.y?1:a.y<b.y?-1:a.x>b.x?1:a.x<b.x?-1:0},UnitCube.drawCubes=function(a,b,c,d,e){a.sort(UnitCube.compare);for(var f=0;f<a.length;f++){var g=b.add(Math.floor(a[f].x*c)+.5,Math.floor(-a[f].y*c)+.5);g=g.add(Math.floor(-a[f].z*c*d.xZ),Math.floor(a[f].z*c*d.yZ)),a[f].draw(g,c,d,e)}},UnitCube.explode=function(a,b,c,d,e){a.sort(UnitCube.compare);for(var f=0;f<a.length;f++){var g=b.add(a[f].x*c,-a[f].y*c);g=g.add(-a[f].z*c*e.xZ,a[f].z*c*e.yZ),g=g.add(d*a[f].x,0),g=g.add(0,-d*a[f].y),g=g.add(-a[f].z*d*e.xZ,a[f].z*d*e.yZ),g=new Point(Math.floor(g.x)+.5,Math.floor(g.y)+.5),a[f].draw(g,c,e)}};