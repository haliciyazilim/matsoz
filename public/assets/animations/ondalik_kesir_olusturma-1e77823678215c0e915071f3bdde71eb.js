var textRectStyle={fillColor:"#fd0",strokeColor:"#000",strokeWidth:2,fontSize:24},animationTextRectStyle={fillColor:"#fdd",strokeColor:"#000",strokeWidth:2,fontSize:13},questionTextStyle={fontSize:15,justification:"center"},Animation={init:function(a){function b(a,b,c){var d=new Path.Rectangle(a,b),e=new PointText(a.add(b.width*.5-animationTextRectStyle.fontSize*.4,b.height*.5+animationTextRectStyle.fontSize*.5));e.content=c;var f=new Group;return f.addChild(d),f.addChild(e),f.text=e,f}function c(a,c,d){var e=[],f=new Group;for(i=c.length-1;i>=0;i--){var g=b(a.add(Math.floor(i*Animation.textRectSize.width),0),Animation.textRectSize,c[i].text);g.set_style(animationTextRectStyle),g.text.fontSize=animationTextRectStyle.fontSize,g.translate(c[i].translate),g.translatePoint=new Point(0,0),g.firstPosition=g.position,g.opacity=1,g.animate({init:function(){this.opacity=1},style:{translatePoint:c[i].translate.negate(),opacity:1},duration:1e3,animationType:"easeIn",update:function(){this.position=this.firstPosition.add(this.translatePoint)},delay:d+300*i}),e.push(g),f.addChild(g)}}Animation.container=a,Animation.referencePoint=new Point(100,15),Animation.textRectSize=new Size(30,30),c(Animation.referencePoint,[{text:"4",translate:new Point(0,0)},{text:"1",translate:new Point(0,0)},{text:"7",translate:new Point(0,0)},{text:"8",translate:new Point(0,0)},{text:",",translate:new Point(0,0)}],0);var d=new Point(200,50);c(Animation.referencePoint.add(d),[{text:"1",translate:d.negate().add(Animation.textRectSize.width,0)},{text:"4",translate:d.negate().add(-Animation.textRectSize.width,0)},{text:",",translate:d.negate().add(Animation.textRectSize.width*2,0)},{text:"7",translate:d.negate().add(-Animation.textRectSize.width,0)},{text:"8",translate:d.negate().add(Animation.textRectSize.width*-1,0)}],8e3);var d=new Point(-50,100);c(Animation.referencePoint.add(d),[{text:"7",translate:d.negate().add(Animation.textRectSize.width*2,0)},{text:",",translate:d.negate().add(Animation.textRectSize.width*3,0)},{text:"8",translate:d.negate().add(Animation.textRectSize.width,0)},{text:"1",translate:d.negate().add(Animation.textRectSize.width*-2,0)},{text:"4",translate:d.negate().add(Animation.textRectSize.width*-4,0)}],6e3);var d=new Point(300,100);c(Animation.referencePoint.add(d),[{text:"1",translate:d.negate().add(Animation.textRectSize.width,0)},{text:"7",translate:d.negate().add(Animation.textRectSize.width,0)},{text:"8",translate:d.negate().add(Animation.textRectSize.width,0)},{text:",",translate:d.negate().add(Animation.textRectSize.width,0)},{text:"4",translate:d.negate().add(Animation.textRectSize.width*-4,0)}],4e3);var d=new Point(400,10);c(Animation.referencePoint.add(d),[{text:"8",translate:d.negate().add(Animation.textRectSize.width*3,0)},{text:"4",translate:d.negate().add(Animation.textRectSize.width*-1,0)},{text:",",translate:d.negate().add(Animation.textRectSize.width*2,0)},{text:"7",translate:d.negate().add(Animation.textRectSize.width*-1,0)},{text:"1",translate:d.negate().add(Animation.textRectSize.width*-3,0)}],2e3)}},Interaction={getFramework:function(){return"paper"},__type:{LARGEST_OF_THE_SMALLERS:0,SMALLEST_OF_THE_LARGERS:1,SMALLEST_IN_BETWEEN:2,LARGEST_IN_BETWEEN:3,SMALLER_THAN:4,LARGER_THAN:5},init:function(a){function d(a,b,c){for(var d=0;d<b.length;d++)if(a.id!=b[d].id&&b[d].children[0].bounds.contains(c.point))return!0;return!1}Interaction.container=a,Main.setObjective("Yandaki rakamları ve virgül işaretini fare ile sürükleyerek istenen ondalık kesri oluşturunuz."),Interaction.paper={width:$(a).width(),height:$(a).height()},Interaction.referencePoint=new Point(130,40),Interaction.textRectSize=new Size(45,40),Path.TextRect=function(a,b,c){var d=new Path.Rectangle(a,b),e=new PointText(a.add(b.width*.5-textRectStyle.fontSize*.4,b.height*.5+textRectStyle.fontSize*.5));e.content=c;var f=new Group;return f.addChild(d),f.addChild(e),f.text=e,f.rect=d,f.firstposition=f.position,f},Interaction.appendButton({bottom:"40px",right:"40px"}),Interaction.appendStatus({bottom:"50px",right:"160px"}),Interaction.questionText=new PointText(new Point(Interaction.paper.width*.5,110)),Interaction.questionText.set_style(questionTextStyle);var b=document.createElement("div"),c=new Tool;c.onMouseDown=function(a){if(a.item&&a.item.class=="draggable"){var b=a.item.parent;b.removeChildren(a.item),b.addChild(a.item),this.item=a.item}},c.onMouseDrag=function(a){this.item&&(this.item.position=this.item.position.add(a.delta),d(this.item,Interaction.shapes,a)?this.item.position=this.item.position.add(a.delta.negate()):this.item._mousePosition=a.point)},c.onMouseUp=function(){this.item=!1},c.activate(),Interaction.setRandomGenerator(6),Interaction.prepareNextQuestion()},nextQuestion:function(a){Interaction.shapes&&$(Interaction.shapes).each(function(a,b){this.remove()}),Interaction.shapes=[],Interaction.digits=[];var b,c=Util.getShuffledArray(10);for(b=0;b<4;b++){var d=c[b],e=new Path.TextRect(Interaction.referencePoint.add(Math.floor(b*Interaction.textRectSize.width*1.4),0),Interaction.textRectSize,d);e.set_style(textRectStyle),e.class="draggable",e.text.fontSize=textRectStyle.fontSize,Interaction.shapes.push(e),Interaction.digits.push(d)}var f=new Path.TextRect(Interaction.referencePoint.add(Math.floor(b*Interaction.textRectSize.width*1.4),0),Interaction.textRectSize,",");f.set_style(textRectStyle),f.class="draggable",f.text.fontSize=textRectStyle.fontSize,Interaction.shapes.push(f),Interaction.permutations=permute((Interaction.digits.join("")+".").toString());for(var b=0;b<Interaction.permutations.length;b++)if(Interaction.permutations[b].indexOf(".")==0||Interaction.permutations[b].indexOf(".")==4)Interaction.permutations.splice(b,1),b--;Interaction.qType=a;switch(a){case Interaction.__type.LARGEST_OF_THE_SMALLERS:do Interaction.digit=Util.randomInteger(0,1e3);while(!Interaction.hasSmaller(Interaction.digit));Interaction.setQuestionText(Interaction.digit+" sayısından küçük en büyük ondalık kesri oluşturunuz.");break;case Interaction.__type.SMALLEST_OF_THE_LARGERS:do Interaction.digit=Util.randomInteger(0,1e3);while(!Interaction.hasLarger(Interaction.digit));Interaction.setQuestionText(Interaction.digit+" sayısından büyük en küçük ondalık kesri oluşturunuz.");break;case Interaction.__type.SMALLEST_IN_BETWEEN:do Interaction.digit_larger=Util.randomInteger(0,1e3);while(!Interaction.hasSmaller(Interaction.digit_larger));do Interaction.digit_smaller=Util.randomInteger(0,1e3);while(Interaction.digit_larger==Interaction.digit_smaller||!Interaction.hasNumberBetween(Interaction.digit_smaller,Interaction.digit_larger)&&!Interaction.hasNumberBetween(Interaction.digit_larger,Interaction.digit_smaller));Interaction.digit_smaller>Interaction.digit_larger&&(Interaction.digit_smaller=(Interaction.digit_larger+=Interaction.digit_smaller-=Interaction.digit_larger)-Interaction.digit_smaller),Interaction.setQuestionText(Interaction.digit_smaller+" ile "+Interaction.digit_larger+" sayıları arasındaki en küçük ondalık kesri oluşturunuz.");break;case Interaction.__type.LARGEST_IN_BETWEEN:do Interaction.digit_larger=Util.randomInteger(0,1e3);while(!Interaction.hasSmaller(Interaction.digit_larger));do Interaction.digit_smaller=Util.randomInteger(0,1e3);while(Interaction.digit_larger==Interaction.digit_smaller||!Interaction.hasNumberBetween(Interaction.digit_smaller,Interaction.digit_larger)&&!Interaction.hasNumberBetween(Interaction.digit_larger,Interaction.digit_smaller));Interaction.digit_smaller>Interaction.digit_larger&&(Interaction.digit_smaller=(Interaction.digit_larger+=Interaction.digit_smaller-=Interaction.digit_larger)-Interaction.digit_smaller),Interaction.setQuestionText(Interaction.digit_smaller+" ile "+Interaction.digit_larger+" sayıları arasındaki en büyük ondalık kesri oluşturunuz.");break;case Interaction.__type.SMALLER_THAN:do Interaction.digit=Util.randomInteger(0,1e3);while(!Interaction.hasSmaller(Interaction.digit));Interaction.setQuestionText(Interaction.digit+" sayısından küçük ondalık kesri oluşturunuz.");break;case Interaction.__type.LARGER_THAN:do Interaction.digit=Util.randomInteger(0,1e3);while(!Interaction.hasLarger(Interaction.digit));Interaction.setQuestionText(Interaction.digit+" sayısından büyük ondalık kesri oluşturunuz.")}},hasLarger:function(a){for(var b=0;b<Interaction.permutations.length;b++)if(a<parseFloat(Interaction.permutations[b],10))return!0;return!1},hasSmaller:function(a){for(var b=0;b<Interaction.permutations.length;b++)if(a>parseFloat(Interaction.permutations[b],10))return!0;return!1},hasNumberBetween:function(a,b){for(var c=0;c<Interaction.permutations.length;c++){var d=parseFloat(Interaction.permutations[c],10);if(a<d&&d<b)return!0}return!1},shapeToNumber:function(){var a="";Interaction.shapes.sort(function(a,b){return a.children[0].bounds.x<b.children[0].bounds.x?-1:a.children[0].bounds.x>b.children[0].bounds.x?1:0});for(var b=0;b<Interaction.shapes.length;b++)a+=Interaction.shapes[b].text.content;return a=a.replace(",","."),parseFloat(a,10)},setQuestionText:function(a){Interaction.questionText.content=a},preCheck:function(){for(var a=0;a<Interaction.shapes.length;a++)if(Interaction.shapes[a]._mousePosition==undefined||Interaction.shapes[a]._mousePosition.y<130)return Interaction.setStatus("Lütfen bütün sayıları yazının altına taşıyınız."),!1;return!0},findAnswer:function(a){for(var b=0;b<Interaction.permutations.length;b++){var c=Interaction.permutations[b];if(a(parseFloat(c,10)))return c}},answerCondition:{LARGEST_OF_THE_SMALLERS:function(a){return a<Interaction.digit&&!Interaction.hasNumberBetween(a,Interaction.digit)},SMALLEST_OF_THE_LARGERS:function(a){return a>Interaction.digit&&!Interaction.hasNumberBetween(Interaction.digit,a)},SMALLEST_IN_BETWEEN:function(a){return a>Interaction.digit_smaller&&a<Interaction.digit_larger&&!Interaction.hasNumberBetween(Interaction.digit_smaller,a)},LARGEST_IN_BETWEEN:function(a){return a>Interaction.digit_smaller&&a<Interaction.digit_larger&&!Interaction.hasNumberBetween(a,Interaction.digit_larger)},SMALLER_THAN:function(a){return a<Interaction.digit},LARGER_THAN:function(a){return a>Interaction.digit}},isAnswerCorrect:function(){var a=Interaction.shapeToNumber();switch(Interaction.qType){case Interaction.__type.LARGEST_OF_THE_SMALLERS:Interaction.correctAnswer=Interaction.findAnswer(Interaction.answerCondition.LARGEST_OF_THE_SMALLERS);if(Interaction.answerCondition.LARGEST_OF_THE_SMALLERS(a))return!0;break;case Interaction.__type.SMALLEST_OF_THE_LARGERS:Interaction.correctAnswer=Interaction.findAnswer(Interaction.answerCondition.SMALLEST_OF_THE_LARGERS);if(Interaction.answerCondition.SMALLEST_OF_THE_LARGERS(a))return!0;break;case Interaction.__type.SMALLEST_IN_BETWEEN:Interaction.correctAnswer=Interaction.findAnswer(Interaction.answerCondition.SMALLEST_IN_BETWEEN);if(Interaction.answerCondition.SMALLEST_IN_BETWEEN(a))return!0;break;case Interaction.__type.LARGEST_IN_BETWEEN:Interaction.correctAnswer=Interaction.findAnswer(Interaction.answerCondition.LARGEST_IN_BETWEEN);if(Interaction.answerCondition.LARGEST_IN_BETWEEN(a))return!0;break;case Interaction.__type.SMALLER_THAN:Interaction.correctAnswer=Interaction.findAnswer(Interaction.answerCondition.SMALLER_THAN);if(Interaction.answerCondition.SMALLER_THAN(a))return!0;break;case Interaction.__type.LARGER_THAN:Interaction.correctAnswer=Interaction.findAnswer(Interaction.answerCondition.LARGER_THAN);if(Interaction.answerCondition.LARGER_THAN(a))return!0}return!1},onCorrectAnswer:function(){},onWrongAnswer:function(){},onFail:function(){Interaction.shapes.sort(function(a,b){var c,d;return c=(""+Interaction.correctAnswer).replace(".",",").indexOf(a.text.content),d=(""+Interaction.correctAnswer).replace(".",",").indexOf(b.text.content),c<d?-1:1});for(var a=0;a<Interaction.shapes.length;a++){var b=Interaction.referencePoint.add(Math.floor(a*Interaction.textRectSize.width*1.4),130),c=b,d=b.add(-textRectStyle.fontSize*.4,+textRectStyle.fontSize*.5);console.log(b.toString()),Interaction.shapes[a].rect.animate({style:{position:c},duration:1e3}),Interaction.shapes[a].text.animate({style:{position:d},duration:1e3})}Interaction.setStatus("Yanlış cevap. Doğrusu "+Interaction.correctAnswer.replace(".",",")+" olacaktı",!1)}};