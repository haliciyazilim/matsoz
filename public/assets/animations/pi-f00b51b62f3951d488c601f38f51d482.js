/*Styles starts*/
var circleStyle={strokeColor:"#255b63",strokeWidth:2},rulerStyle={},circularAreaStyle={strokeColor:"#000",strokeWidth:2,fillColor:"#ffa"},Animation={init:function(a){function b(a,b,c,d,e){var f=document.createElement("div");return $(Animation.container).append(f),$(f).html(a).css({position:"absolute",top:c,left:b,opacity:0}).delay(d).animate({opacity:1},1e3),e&&e(f),f}Animation.container=a;var c=$(a).width(),d=$(a).height(),e=c*.5,f=d*.5,g=75,h=[],i=new Point(e-100,f),j=new Path.Circle(i,g);j.set_style(circularAreaStyle),j.fillColor=new RgbColor(1,1,.8,0),j.opacity=0;var k=new AnimationHelper({angle:0,circleCenter:i,R:g});k.animate({style:{angle:359},duration:1e3,update:function(){Animation.arcByAngle&&Animation.arcByAngle.remove();if(this.angle==359)return;Animation.arcByAngle=new Path.ArcByAngle(this.circleCenter,this.R,this.angle,0),Animation.arcByAngle.strokeColor=circularAreaStyle.strokeColor,Animation.arcByAngle.strokeWidth=circularAreaStyle.strokeWidth}});var l=new PointText(new Point(i.x-10,i.y+20));l.content="O";var m=new Path.Circle(i,3);m.set_style({fillColor:"#000"});var n=new Path.Line(i,new Point(i.x+g*Math.cos(Util.degreeToRadian(-15)),i.y+g*Math.sin(Util.degreeToRadian(-15))));n.set_style(circularAreaStyle);var o=new Path.Line(i,new Point(i.x+g*Math.cos(Util.degreeToRadian(-195)),i.y+g*Math.sin(Util.degreeToRadian(-195))));o.set_style(circularAreaStyle);var p=new PointText(new Point(i.x+g*Math.cos(Util.degreeToRadian(-15))*.5,i.y+g*Math.sin(Util.degreeToRadian(-15))*.5+15));p.content="r",h.push(o),h.push(p),h.push(j),h.push(l),h.push(n),h.push(m),$(h).each(function(){this.opacity=0}),j.animate({style:{opacity:1},duration:1,delay:900}),j.animate({style:{fillColor:new RgbColor(1,1,.8,1)},duration:1e3,delay:1e3}),m.animate({style:{opacity:1},duration:1e3}),l.animate({style:{opacity:1},duration:1e3}),n.animate({style:{opacity:1},duration:1e3,delay:1100}),p.animate({style:{opacity:1},duration:1e3,delay:1100,callback:function(){this.animate({style:{opacity:0},duration:1e3,delay:1e3})}}),o.animate({style:{opacity:1},duration:1e3,delay:2200}),b("π = ",e+50,f,3e3),b("",458,90,3e3,function(a){$(a).css({position:"absolute",top:"90px",borderBottom:"1px solid #000",height:"1px",width:"170px"})}),b("dairenin çevre uzunluğu",e+85,f-10,5500,function(a){$(a).animate({color:"#f00"},400).delay(500).animate({color:"#000"},400)}),j.animate({style:{strokeWidth:4,strokeColor:new RgbColor(1,0,0)},duration:400,delay:6500}),j.animate({style:{strokeWidth:2,strokeColor:new RgbColor(0,0,0)},duration:400,delay:7500}),b("çap",e+145,f+10,8e3,function(a){$(a).animate({color:"#f00"},1e3).animate({color:"#000"},1e3)}),n.animate({style:{strokeWidth:4,strokeColor:new RgbColor(1,0,0)},duration:400,delay:9e3}),n.animate({style:{strokeWidth:2,strokeColor:new RgbColor(0,0,0)},duration:400,delay:1e4}),o.animate({style:{strokeWidth:4,strokeColor:new RgbColor(1,0,0)},duration:400,delay:9e3}),o.animate({style:{strokeWidth:2,strokeColor:new RgbColor(0,0,0)},duration:400,delay:1e4}),b(" = ",e+255,f,11e3),b("3,14",e+270,f,12e3),Main.animationFinished(15e3)}},Interaction={images:[{id:"ruler",src:"/assets/animations/pi/ruler_4cm.png"}],getFramework:function(){return"paper"},init:function(a){Interaction.container=a,Main.setObjective("Yandaki cetveli sürükleyip kullanarak verilen çemberin çapını ölçünüz. “Aç” düğmesine basıp oluşan çemberin uzunluğunu ölçünüz. Bu iki uzunluktan hareketle π (pi) sayısını yaklaşık olarak bulup kutuya yazınız ve kontrol ediniz."),Interaction.paper={width:$(a).width(),height:$(a).height()};var b=document.createElement("input");b.setAttribute("type","button"),$(a).append(b),$(b).attr({"class":"control_button",value:"",onClick:"Interaction.drawLine()"}).css({backgroundImage:"url(/assets/btn_gray_expand_text.png)",position:"absolute",top:"200px",left:"30px",width:"57px",height:"32px"}),Interaction.appendInput({top:"200px",right:"130px",width:"4.5ex"}).maxLength=4,Interaction.appendInput({top:"175px",right:"225px"}),Interaction.appendInput({top:"225px",right:"225px",zIndex:9}),Interaction.appendButton({bottom:"10px",right:"50px"}),Interaction.appendStatus({bottom:"20px",right:"160px",width:"400px",textAlign:"right"}),Interaction.span=document.createElement("div"),$(a).append(Interaction.span),$(Interaction.span).css({position:"absolute",top:"210px",right:"180px",width:"280px",height:"20px",textAlign:"right",fontWeight:"bold",fontSize:"16px"}).html('π’nin yaklaşık değeri = <span style="border-bottom: 1px solid #000;position: relative;top: -10px;">&emsp;&emsp;&emsp;&emsp;&nbsp;&emsp;</span> = '),Util.dom({tag:"span",parent:a,html:"br",css:{position:"absolute",top:parseInt($(Interaction.inputs[1]).css("top"),10)+12,right:parseInt($(Interaction.inputs[1]).css("right"),10)-20}}),Util.dom({tag:"span",parent:a,html:"br",css:{position:"absolute",top:parseInt($(Interaction.inputs[2]).css("top"),10)+12,right:parseInt($(Interaction.inputs[2]).css("right"),10)-20}}),Interaction.pause=!1,Interaction.drawRuler(10,10),Interaction.prepareNextQuestion()},nextQuestion:function(){Interaction.inputs[0].style.color="#000",Interaction.inputs[1].style.color="#000",Interaction.inputs[2].style.color="#000";if(Interaction.circleRadius==undefined)Interaction.circleRadius=60;else{var a;do a=Math.floor(Math.random()*5+5)*6;while(a==Interaction.circleRadius);Interaction.circleRadius=a}Interaction.circlePosition=new Point(75,75),Interaction.lineStartPoint=new Point(150,75+Interaction.circleRadius),Interaction.circle&&Interaction.circle.remove(),Interaction.drawLine.arc&&Interaction.drawLine.arc.remove(),Interaction.drawLine.line&&Interaction.drawLine.line.remove(),Interaction.trial=0,Interaction.isLineDrawed=!1,Interaction.drawCircle(),Interaction.ruler.animate({style:{position:Interaction.ruler.firstPosition},duration:500})},drawRuler:function(a,b){Interaction.ruler=new Raster("ruler"),Interaction.ruler.set_style(rulerStyle);var c=new Point(a+Interaction.ruler.bounds.width+.5,b+Interaction.ruler.bounds.height*.5);Interaction.ruler.position=c,Interaction.ruler.firstPosition=c,Interaction.ruler.guide=!0,Interaction.ruler.class="ruler";var d=new Tool;d.onMouseDown=function(a){Interaction.ruler.bounds.contains(a.point)&&(this.drag=!0,this.totalDelta=new Point(0,0),this.firstPosition=Interaction.ruler.position)},d.onMouseDrag=function(a){if(!this.drag)return;var b=this.firstPosition.add(this.totalDelta).add(a.delta);Interaction.isLineDrawed&&b.x<400&&b.x>350&&b.y>Interaction.lineStartPoint.y+Interaction.ruler.bounds.height*.5-20&&b.y<Interaction.lineStartPoint.y+Interaction.ruler.bounds.height*.5+20?Interaction.ruler.position=Interaction.lineStartPoint.add(Interaction.ruler.bounds.width*.5-10,Interaction.ruler.bounds.height*.5+1):Interaction.ruler.position=b,this.totalDelta=this.totalDelta.add(a.delta)},d.onMouseUp=function(){this.drag=!1},d.activate()},drawCircle:function(){Interaction.circle=new Group;var a=new Path.Circle(Interaction.circlePosition,Interaction.circleRadius);a.set_style(circleStyle);var b=new Path.Circle(Interaction.circlePosition,2);b.set_style({fillColor:circleStyle.strokeColor}),Interaction.ruler.insertAbove(a),Interaction.ruler.insertAbove(b),Interaction.circle.addChild(a),Interaction.circle.addChild(b)},drawLine:function(){if(Interaction.pause===!0)return;Interaction.isLineDrawed=!0;var a=new AnimationHelper({position:new Point(Interaction.circlePosition.x,Interaction.circlePosition.y),angle:0});Interaction.onFrame=function(){Interaction.drawLine.arc&&Interaction.drawLine.arc.remove(),Interaction.pause=!0;if(a.angle==0)Interaction.drawLine.arc=new Path.Circle(a.position,Interaction.circleRadius),Interaction.drawLine.arc.set_style(circleStyle),Interaction.drawLine.arc.opacity=.5;else if(a.angle>0&&a.angle<=360){var b=Interaction.circleRadius*2*Math.PI;a.angle==360?(b*=1,a.angle=361):b*=a.angle%360/360,a.angle<360&&(Interaction.drawLine.arc=new Path.ArcByAngle(Interaction.lineStartPoint.add(b,-Interaction.circleRadius),Interaction.circleRadius,-270+a.angle+360,-270),Interaction.drawLine.arc.set_style(circleStyle),Interaction.drawLine.arc.opacity=.5),Interaction.drawLine.line&&Interaction.drawLine.line.remove(),Interaction.drawLine.line=new Path.Line(Interaction.lineStartPoint,Interaction.lineStartPoint.add(b,0)),Interaction.drawLine.line.set_style(circleStyle),Interaction.ruler.insertAbove(Interaction.drawLine.line)}else Interaction.pause=!1,Interaction.onFrame=null},a.animate({style:{angle:360},duration:1e3,delay:1e3}),a.animate({style:{position:new Point(Interaction.circlePosition.x+100,Interaction.circlePosition.y)},duration:900,animationType:"easeOut"})},preCheck:function(){},isAnswerCorrect:function(a){return console.log(a),a[2]!=(""+Interaction.circleRadius/60).replace(".",",")?!1:parseFloat(a[1].replace(",","."),10)<Interaction.circleRadius/60*3||parseFloat(a[1].replace(",","."),10)>Interaction.circleRadius/60*3.15?!1:parseFloat(a[0].replace(",","."),10)<3||parseFloat(a[0].replace(",","."),10)>3.15?!1:!0},onCorrectAnswer:function(){},onWrongAnswer:function(){},onFail:function(){Interaction.inputs[2].value=(""+(Interaction.circleRadius/60).toFixed(1)).replace(".",","),Interaction.inputs[1].value=(""+(Interaction.circleRadius/60*3).toFixed(1)).replace(".",","),Interaction.inputs[0].value=3,Interaction.inputs[0].style.color="#0a0",Interaction.inputs[1].style.color="#0a0",Interaction.inputs[2].style.color="#0a0",Interaction.setStatus("Yanlış cevap, doğrular kutularda gösterilmektedir",!1)}};