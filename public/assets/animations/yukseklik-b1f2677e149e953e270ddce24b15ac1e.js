// JavaScript Document
var shapeStyle={strokeColor:"#000",strokeWidth:2},dashedLineStyle={strokeColor:"#333",strokeWidth:1,dashArray:[3,2]},heightLineStyle={strokeColor:"#f00",strokeWidth:2},textStyle={fontSize:16},Animation={images:[{id:"wall",src:"/assets/animations/yukseklik/wall.png"},{id:"redline",src:"/assets/animations/yukseklik/redline.png"},{id:"height",src:"/assets/animations/yukseklik/height.png"}],init:function(a){Animation.container=a;var b=$(a).width(),c=$(a).height(),d=new Point(b*.5+.5,c*.5),e=new Raster("wall"),f=new Raster("redline"),g=new Raster("height");e.position=new Point(d),f.position=new Point(d),g.position=new Point(d),e.opacity=0,f.opacity=0,g.opacity=0,e.animate({style:{opacity:1},duration:1e3,delay:100}),f.animate({style:{opacity:1},duration:1e3,delay:1200}),g.animate({style:{opacity:1},duration:1e3,delay:2300})}},Interaction={getFramework:function(){return"paper"},init:function(a){Main.setObjective("Yandaki geometrik şeklin köşelerinden herhangi birine basınız. Belirlediğiniz noktaya göre yüksekliğin bulunuşunu inceleyiniz."),Interaction.container=a,Interaction.paper={width:$(a).width(),height:$(a).height()},Interaction.shapeCount=0,Interaction.nextButton=document.createElement("input"),Interaction.nextButton.setAttribute("type","button"),$(a).append(Interaction.nextButton),$(Interaction.nextButton).attr({"class":"next_button"}).css({position:"absolute",bottom:"10px",right:"10px"}).click(Interaction.nextQuestion),Interaction.nextQuestion(),Interaction.createTool()},nextQuestion:function(){project.activeLayer.removeChildren(),Interaction.shapeCount++,Interaction.drawHeightLine.vertexLetter=!1,Interaction.letters=["E","D","C","B","A"];var a=Interaction.paper.width*.5-100,b=Interaction.paper.height*.5-75,c=200,d=200,e=9,f=Math.floor(Math.random()*60)-30;Interaction.shapeCount=Interaction.shapeCount%e;if(Interaction.shuffledArray==null||Interaction.shuffledArray==undefined)Interaction.shuffledArray=Util.getShuffledArray(e);Interaction.shapeType=Interaction.shuffledArray[Interaction.shapeCount];switch(Interaction.shapeType){case 0:Interaction.shape=new Path.EquiradialPolygon(new Point(a,b),new Size(c,d),[45,135,225,315],f);break;case 1:Interaction.shape=new Path.EquiradialPolygon(new Point(a,b),new Size(c,d),[60,120,240,300],f);break;case 2:Interaction.shape=new Path.Rhomboid(new Point(a,b),new Size(c*.8,d*.4),c*.2,f);break;case 3:Interaction.shape=new Path.EquiradialPolygon(new Point(a,b),new Size(c,d),[100,160,240],f);break;case 4:Interaction.shape=new Path.EquiradialPolygon(new Point(a,b),new Size(c,d),[90,210,340],f);break;case 5:Interaction.shape=new Path.EquiradialPolygon(new Point(a,b),new Size(c,d),[90,240,300],f);break;case 6:Interaction.shape=new Path.Trapezoid(new Point(a,b),new Size(c,d*.5),c*.4,c*.2,f);break;case 7:Interaction.shape=new Path.IsoscelesTrapezoid(new Point(a,b),new Size(c,d*.5),c*.3,f);break;case 8:Interaction.shape=new Path.Trapezoid(new Point(a,b),new Size(c*.8,d*.5),c*.3,0,f)}Interaction.shape.set_style(shapeStyle);var g=Interaction.shape.centerPoint.subtract(new Point(Interaction.paper.width*.5,Interaction.paper.height*.5)).multiply(-1,-1);Interaction.shape.translate(g);for(var h=0;h<Interaction.shape.vertexArray.length;h++){Interaction.shape.vertexArray[h]=Interaction.shape.vertexArray[h].add(g);var i=(h+1)%Interaction.shape.vertexArray.length,j=Interaction.shape.vertexArray[h].findPointTo(Interaction.shape.centerPoint,-20).add(-5,5);Interaction.printVertexLetters(j)}Interaction.drawHeightLine(0)},createTool:function(){var a=40,b=new Tool;b.onMouseDown=function(b){if(Interaction.shape==null||Interaction.shape==undefined)return;for(var c=0;c<Interaction.shape.vertexArray.length;c++)a>Interaction.shape.vertexArray[c].getDistance(b.point)&&Interaction.drawHeightLine(c)},b.activate()},drawHeightLine:function(a){Interaction.heightLine&&Interaction.heightLine.remove();var b,c,d,e;d=Interaction.shape.vertexArray[a];switch(Interaction.shape.vertexArray.length){case 4:b=Interaction.shape.vertexArray[(a+1)%4],c=Interaction.shape.vertexArray[(a+2)%4],e=d.projectToLine(b,c);break;case 3:b=Interaction.shape.vertexArray[(a+1)%3],c=Interaction.shape.vertexArray[(a+2)%3],e=d.projectToLine(b,c)}Interaction.heightLine=new Group,Interaction.heightLine.addChild((new Path.Line(d,e)).set_style(heightLineStyle));var f,g;e.getDistance(b)>e.getDistance(c)?(f=b,g=c):(g=b,f=c);var h=e.findPointTo(f,10),i=e.findPointTo(d,10),j=Util.centerOfPoints([h,i]),k=e.symmetricTo(j),l=(new Path.Line(h,k)).set_style(heightLineStyle),m=(new Path.Line(i,k)).set_style(heightLineStyle),n=(new Path.Circle(j,1)).set_style(heightLineStyle);Interaction.heightLine.addChild(l),Interaction.heightLine.addChild(m),Interaction.heightLine.addChild(n),e.isBetweenTwoLinePoints(b,c)||Interaction.heightLine.addChild((new Path.Line(e,g)).set_style(dashedLineStyle));var o=e.findPointTo(d,-20).add(-5,5);Interaction.drawHeightLine.vertexLetter?Interaction.drawHeightLine.vertexLetter.position=o:Interaction.drawHeightLine.vertexLetter=Interaction.printVertexLetters(o);var p=(new Path.Circle(Util.centerOfPoints([d,e]),12)).set_style({fillColor:"#dedede",strokeColor:"#000"}),q=new PointText(Util.centerOfPoints([d,e]).add(-5,7));q.set_style(textStyle),q.content="h";var r=new Path.Circle(d,4);r.set_style({fillColor:"#000"}),Interaction.heightLine.addChild(r),Interaction.heightLine.addChild(p),Interaction.heightLine.addChild(q)},printVertexLetters:function(a){var b=new PointText(a);return b.content=""+Interaction.letters.shift(),b.set_style(textStyle),b}};