// JavaScript Document
function Animation(a,b){this.item=a,this.style=b.style,this.duration=b.duration,b.delay?this.startTime=(new Date).getTime()+b.delay:this.startTime=(new Date).getTime(),b.animationType?(this.animationType=b.animationType,this.animationType=="custom"&&(this.mappingFunction=b.mappingFunction)):this.animationType="linear",typeof b.callback=="function"&&(this.item.callback=b.callback),this.idle=!0,this.map=function(a){return this.animationType=="linear"?a:this.animationType=="easeInEaseOut"?a*a*(3-2*a):this.animationType=="custom"?this.mappingFunction(a):a}}var Main=function(){$(document).ready(Main.init)};Main.config={defaultLibrary:"raphael"},Main.init=function(){Main.interaction=$("#interaction_container > .interaction").get(0),Main.objective=$("#interaction_container > .objective").get(0),Main.objective.className="objective";var a;typeof Interaction.getFramework=="function"?a=Interaction.getFramework():a=Main.config.defaultLibrary,a=="raphael"?(Main.raphaelInit(),Interaction.init(Main.interaction)):a=="paper"&&(Main.scale=1,paper.install(window),Main.paperInit(),width=512,height=320,Main.interaction.innerHTML="<canvas id='interaction_canvas' class='interaction_canvas' width='"+width*Main.scale+"px' height='"+height*Main.scale+"px'></canvas>",canvas=$(".interaction_canvas").get(0),paper.setup(canvas),AnimationManager(),view.onFrame=function(a){AnimationManager.update(a),typeof Interaction.onFrame=="function"&&Interaction.onFrame(a)},Interaction.init(Main.interaction))},Main.paperInit=function(){Path.Triangle=function(a,b,c){var d=new Path;return d.add(c),d.add(a),d.add(b),d.closed=!0,d},Path.Bowl=function(a,b){var c=a.x,d=a.y,e=b.width,f=b.height,g=new Path;return g.add([c,d]),g.add([c+e,d]),g.add([c+e*.8,d+f]),g.add([c+e*.2,d+f]),g.closed=!0,g},Path.Rhomboid=function(a,b,c){var d=a.x,e=a.y,f=b.width,g=b.height,h=new Path;return h.add([d+c,e]),h.add([d+c+f,e]),h.add([d+f,e+g]),h.add([d,e+g]),h.closed=!0,h},Path.Cube=function(a,b){var c=a.x,d=a.y,e=c+b*.3,f=d+b*.3,g=new Path;return g.add([c,f]),g.add([c,f+b]),g.add([c+b,f+b]),g.add([c+b,f]),g.add([c,f]),g.add([e,d]),g.add([e+b,d]),g.add([c+b,f]),g.add([c+b,f+b]),g.add([e+b,d+b]),g.add([e+b,d]),g.add([c+b,f]),g.closed=!0,g},Path.Rhombus=function(a,b){var c=a.x,d=a.y,e=b.width,f=b.height,g=new Path;return g.add([c,d+f*.5]),g.add([c+e*.5,d]),g.add([c+e,d+f*.5]),g.add([c+e*.5,d+f]),g.closed=!0,g},Path.Trapezoid=function(a,b,c){var d=a.x,e=a.y,f=b.width,g=b.height,h=new Path;return h.add([d,e+g]),h.add([d+(f-c)*.5,e]),h.add([d+(f-c)*.5+c,e]),h.add([d+f,e+g]),h.closed=!0,h},Path.RegularPolygon=function(a,b,c,d){var e=[];for(var f=0;f<c;f++)e[f]=360/c*f;return new Path.EquiradialPolygon(a,b,e,d)},Path.EquiradialPolygon=function(a,b,c,d){var e=a.x,f=a.y,g=b.width,h=b.height,i=Math.random()*60;d!=null&&(i=d);var j=Math.min(g,h)*.5,k=e+g*.5,l=f+h*.5,m=new Path;for(var n=0;n<c.length;n++){var o=Util.degreeToRadians(i+c[n]),p=k+j*Math.cos(o),q=l+j*Math.sin(o);m.add([p,q])}return m.closed=!0,m},Path.OneSidedArrow=function(a,b,c,d){c==null&&(c=3),d==null&&d=="undefined"&&(d=30);var e=new Group,f=new Path.Line(a,b),g=Util.radianToDegree(Math.asin((a.y-b.y)/a.getDistance(b))),h=Util.degreeToRadians(180+g+d),i=Util.degreeToRadians(180+g-d),j=new Path.Line(b,new Point(b.x+c*Math.cos(h),b.y-c*Math.sin(h))),k=new Path.Line(b,new Point(b.x+c*Math.cos(i),b.y-c*Math.sin(i))),l=new Path;return l.add(b),l.add(new Point(b.x+c*Math.cos(h),b.y-c*Math.sin(h))),l.add(new Point(b.x+c*Math.cos(i),b.y-c*Math.sin(i))),l.closed=!0,f.strokeColor="black",l.style={strokeColor:"black",fillColor:"black"},e.addChild(f),e.addChild(l),e},Path.Cylinder=function(a,b){var c=a.x,d=a.y,e=b.width,f=b.height,g,h,i,j;g=c+e*.2,i=c+e*.8,h=d-f*.2,j=d-f*.2;var k=new Group,l=new Path;l.add(new Point(c,d)),l.cubicCurveTo(new Point(g,h),new Point(i,j),new Point(c+e,d)),g=c+e*.2,i=c+e*.8,h=d+f*.2,j=d+f*.2,l.cubicCurveTo(new Point(i,j),new Point(g,h),new Point(c,d)),l.lineTo(new Point(c,d+f)),g=c+e*.2,i=c+e*.8,h=d+f+f*.2,j=d+f+f*.2,l.cubicCurveTo(new Point(g,h),new Point(i,j),new Point(c+e,d+f)),l.lineTo(new Point(c+e,d)),g=c+e*.2,i=c+e*.8,h=d+f*.2,j=d+f*.2,l.cubicCurveTo(new Point(i,j),new Point(g,h),new Point(c,d)),l.closed=!0,k.addChild(l);var m=new Path;return g=c+e*.2,i=c+e*.8,h=d+f-f*.2,j=d+f-f*.2,m.add(new Point(c,d+f)),m.cubicCurveTo(new Point(g,h),new Point(i,j),new Point(c+e,d+f)),m.style={dashArray:[3.2]},k.addChild(m),k},Path.Pyramid=function(a,b){var c=new Group,d=new Path,e=new Point(a.x+b.width*0,a.y+b.height*.8),f=new Point(a.x+b.width*.45,a.y+b.height),g=new Point(a.x+b.width,a.y+b.height*.8),h=new Point(a.x+b.width*.5,a.y),i=new Point(a.x+b.width*.55,a.y+b.height*.6);d.add(e),d.add(f),d.add(g),d.add(h),d.closed=!0,c.addChild(d),c.addChild(new Path.Line(f,h));var j=new Path.Line(e,i),k=new Path.Line(g,i),l=new Path.Line(h,i);return j.style={dashArray:[3,2]},k.style={dashArray:[3,2]},l.style={dashArray:[3,2]},c.addChild(j),c.addChild(k),c.addChild(l),c},Path.Cone=function(a,b){var c=a.x,d=a.y,e=b.width,f=b.height,g=new Point(c,d+f*.9),h=new Point(c+e*.5,d+f),i=new Point(c+e,d+f*.9),j=new Point(c+e*.5,d),k=new Point(c+e*.5,d+f*.8),l=new Group,m=new Path;m.add(g),m.arcTo(h,i),m.add(j),m.closed=!0;var n=new Path;return n.add(g),n.arcTo(k,i),n.style={dashArray:[3,2]},console.log("asdasdasdasd"),l.addChild(m),l.addChild(n),l},Path.Sphere=function(a,b){var c=a.x,d=a.y,e=new Point(c-b,d),f=new Point(c+b,d);px1=new Point(c,d+b*.2),px2=new Point(c,d-b*.2);var g=new Group,h=new Path.Circle(a,b),i=new Path,j=new Path;return i.add(e),i.arcTo(px1,f),j.add(e),j.arcTo(px2,f),j.style={dashArray:[3,2]},g.addChild(h),g.addChild(i),g.addChild(j),g},Path.SquarePrisim=function(a,b,c){return new Path.RectanglePrisim(a,new Size(b,b),new Size(c,c))},Path.RectanglePrisim=function(a,b,c){var d=a.x,e=a.y,f=new Point(d,e+c.height),g=new Point(d,e+b.height+c.height),h=new Point(d+b.width,e+c.height),i=new Point(d+c.width,e),j=new Point(d+b.width+c.width,e),k=new Point(d+c.width+b.width,e+b.height);p7=new Point(d+c.width,e+b.height),p8=new Point(d+b.width,e+b.height+c.height);var l=new Group,m=new Path;m.add(f),m.add(i),m.add(j),m.add(k),m.add(p8),m.add(g),m.add(f),m.add(h),m.add(p8);var n=new Path.Line(h,j),o=new Path.Line(g,p7),p=new Path.Line(p7,i),q=new Path.Line(p7,k);return o.style={dashArray:[3,2]},q.style={dashArray:[3,2]},p.style={dashArray:[3,2]},l.addChild(m),l.addChild(n),l.addChild(o),l.addChild(p),l.addChild(q),l},Path.TrianglePrisim=function(a,b){var c=a.x,d=a.y,e=b.width,f=b.height,g=.5,h=.3,i=new Group,j=new Point(c,d+f),k=new Point(c+e*(1-g),d+f),l=new Point(c+e*(1-g)*.5,d+f*h),m=new Point(c+e,d+f*(1-h)),n=new Point(c+e*(1-g)*.5+e*g,d),o=new Point(c+e*g,d+f*(1-h)),p=new Path;p.add(k),p.add(j),p.add(l),p.add(k),p.add(m),p.add(n),p.add(l);var q=new Path.Line(j,o),r=new Path.Line(n,o),s=new Path.Line(m,o);return q.style={dashArray:[3,2]},s.style={dashArray:[3,2]},r.style={dashArray:[3,2]},i.addChild(p),i.addChild(q),i.addChild(r),i.addChild(s),i},Item.prototype.animate=function(a){if(typeof a!=typeof {}||a instanceof Array)throw"The argument to Item.animate needs be a Hash";AnimationManager.animate(new Animation(this,a))},Item.prototype.setStyle=function(a){if(typeof a!=typeof {}||a instanceof Array)throw"The argument to Item.setStyle needs be a Hash";for(var b in a)a.hasOwnProperty(b)&&(this.style[b]=a[b])}},Main.raphaelInit=function(){Raphael.fn.triangle=function(a,b,c,d,e,f){var g="";g+="M"+a+","+b+"L"+c+","+d,g+="L"+e+","+f+" z";var h=this.path(g);return h.attr({x:a,y:f}),h},Raphael.fn.line=function(a,b,c,d){var e=this.path("M"+a+","+b+"L"+c+","+d);return e.attr("x",a),e.attr("y",b),e.data("isPath",!0),e},Raphael.fn.bowl=function(a,b,c,d){var e=this.path("M"+a+","+b+"L"+(a+c)+","+b+"L"+(a+c*.8)+","+(b+d)+"L"+(a+.2*c)+","+(b+d)+" z");return e.attr("x",a),e.attr("y",b),e.attr("width",c),e.attr("height",d),e},Raphael.fn.rhomboid=function(a,b,c,d,e){var f="";f+="M"+(a+c)+","+b+"L"+(a+c+d)+","+b,f+="L"+(a+d)+","+(b+e),f+="L"+a+","+(b+e)+" z";var g=this.path(f);return g.attr({x:a,y:b}),g},Raphael.fn.cube=function(a,b,c){var d=a+c*.4,e=b+c*.2,f=this.path("M"+a+","+e+"L"+a+","+(e+c)+"L"+(a+c)+","+(e+c)+"L"+(a+c)+","+e+"L"+a+","+e+"L"+d+","+b+"L"+(d+c)+","+b+"L"+(a+c)+","+e+"L"+(a+c)+","+(e+c)+"L"+(d+c)+","+(b+c)+"L"+(d+c)+","+b);return f.data("isPath",!0),f.attr("x",a),f.attr("y",b),f},Raphael.fn.rhombus=function(a,b,c,d){var e="";e+="M"+a+","+(b+d*.5),e+="L"+(a+c*.5)+","+b,e+="L"+(a+c)+","+(b+d*.5),e+="L"+(a+c*.5)+","+(b+d),e+="z";var f=this.path(e);return f.data({x:a,y:b,w:c,h:d}),f},Raphael.fn.trapezoid=function(a,b,c,d,e){var f="";f+="M"+a+","+(b+d),f+="L"+(a+(c-e)*.5)+","+b,f+="L"+(a+(c-e)*.5+e)+","+b,f+="L"+(a+c)+","+(b+d),f+=" z";var g=this.path(f);return g.data({x:a,y:b,w:c,h:d}),g},Raphael.fn.sphere=function(a,b,c,d){var e=this.ellipse(a,b,c,c).attr({fill:"r(.3,.25) white-"+d,stroke:"none"});return e.data("isEllipse",!0),e.attr("x",a),e.attr("y",b),e},Raphael.fn.sline=function(a,b,c){var d="";d+="M"+a+","+b+"L"+(a+10)+","+(b-10),d+="M"+a+","+b+"L"+(a+10)+","+(b+10),d+="M"+a+","+b+"L"+(a+c)+","+b,d+="M"+(a+c)+","+b+"L"+(a+c-10)+","+(b-10),d+="M"+(a+c)+","+b+"L"+(a+c-10)+","+(b+10);var e=this.path(d);return e.attr("x",a),e.attr("y",b),e},Raphael.fn.cylinder=function(a,b,c,d){var e,f,g,h,i="";e=a+c*.2,g=a+c*.8,f=b-d*.2,h=b-d*.2,i+="M"+a+","+b+"C"+e+","+f+","+g+","+h+","+(a+c)+","+b,e=a+c*.2,g=a+c*.8,f=b+d*.2,h=b+d*.2,i+="C"+g+","+h+","+e+","+f+","+a+","+b,i+="L"+a+","+(b+d),e=a+c*.2,g=a+c*.8,f=b+d+d*.2,h=b+d+d*.2,i+="C"+e+","+f+","+g+","+h+","+(a+c)+","+(b+d),i+="L"+(a+c)+","+b,e=a+c*.2,g=a+c*.8,f=b+d*.2,h=b+d*.2,i+="C"+g+","+h+","+e+","+f+","+a+","+b;var j=this.path(i);return j.data("isPath",!0),j.attr("x",a),j.attr("y",b),j.attr("fill","#fff"),j},Raphael.fn.fraction=function(a,b,c,d,e){var f=this.set();c2=b+e,c3=a+e*1.5,c&&(pay=this.text(a+e*5/7,b,c),pay.attr({"font-size":e}),f.push(pay)),d&&(payda=this.text(a+e*5/7,c2+e,d),payda.attr({"font-size":e}),f.push(payda));var g="M"+a+" "+c2+"L"+c3+" "+c2;return f.push(this.path(g)),f},Raphael.fn.segmentedUmbrella=function(a,b,c,d){var e=this.set();for(i=0;i<d;i++)e.push(this.path().attr({segment:[a,b,c,360*-i/d-90,360*(-i-1)/d-90]}));return e},Raphael.fn.segmentedCircle=function(a,b,c,d){var e=this.set();for(i=0;i<d;i++)e.push(this.path().attr({segment:[a,b,c,360*i/d-90,360*(i+1)/d-90]}));return e},Raphael.fn.segmentedRectangle=function(a,b,c,d,e,f){var g=this.set();for(i=0;i<e;i++)for(j=0;j<f;j++)g.push(this.rect(a+i*c/e,b+j*d/f,c/e,d/f));return g},Raphael.fn.regularPolygon=function(a,b,c,d,e,f){var g=[];for(var h=0;h<e;h++)g[h]=360/e*h;return this.equiradialPolygon(a,b,c,d,g,f)},Raphael.fn.equiradialPolygon=function(a,b,c,d,e,f){var g=Math.random()*60;f!=null&&(g=f);var h=Math.min(c,d)*.5,i=a+c*.5,j=b+d*.5,k="";for(var l=0;l<e.length;l++){k+=l==0?"M":"L";var m=Util.degreeToRadians(g+e[l]),n=i+h*Math.cos(m),o=j+h*Math.sin(m);k+=n+","+o}return k+="z",this.path(k)}},Main.setObjective=function(a){Main.objective.innerHTML=a},Main();var Util={isInteger:function(a){var b=/^\d+$/;return b.test(val)},isNumber:function(a){return!isNaN(parseFloat(a))&&isFinite(a)},findDistance:function(a,b,c,d){var e=a-c,f=b-d;return Math.sqrt(e*e+f*f)},findAngle:function(a,b,c,d){return b==d?a>c?Math.PI:0:a==c?b>d?Math.PI/2:3*Math.PI/2:(angle=-Math.atan((d-b)/(c-a)),c<a?angle+=Math.PI:d>b&&(angle+=2*Math.PI),angle)},radianToDegree:function(a){return Math.round(a*(180/Math.PI))},degreeToRadians:function(a){return a*(Math.PI/180)},formatNumber:function(a,b){return Math.floor(a*b*10)/(b*10)},rand01:function(){return Math.floor(Math.random()*2)},loadImages:function(a,b){totalNoOfImages=a.length;for(var c in a){image=a[c];var d=$("<img id='"+image.id+"' />").attr("src",image.src).load(function(){if(!this.complete||typeof this.naturalWidth=="undefined"||this.naturalWidth==0||this.naturalWidth==null)throw"Broken Image: "+image;totalNoOfImages--,totalNoOfImages==0&&b()});$("head").append(d)}},getShuffledArray:function(a,b){if(b==null||b==undefined)b=0;var c=[];for(var d=b,e=0;d<a;d++,e++)c[e]=d;var f=Math.floor(a-b);for(var d=f-1;d>=0;d--){var g=parseInt(Math.random()*f),h=c[d];c[d]=c[g],c[g]=h}return c}},AnimationManager=function(){AnimationManager.animations=[]};AnimationManager.animate=function(a){AnimationManager.animations.push(a)},AnimationManager.clearAnimations=function(){AnimationManager.animations=[]},AnimationManager.update=function(a){for(var b=0;b<AnimationManager.animations.length;b++){var c=AnimationManager.animations[b];currentTime=(new Date).getTime();if(c.startTime<currentTime)if(c.idle){c.startHash={},c.endHash={};for(var d in c.style)c.style.hasOwnProperty(d)&&(c.startHash[d]=c.item[d]);c.idle=!1}else if(c.startTime+c.duration<currentTime)for(var d in c.startHash)c.startHash.hasOwnProperty(d)&&(c.item[d]=c.style[d],AnimationManager.animations.splice(b,1),c.item.callback&&c.item.callback());else for(var d in c.startHash)c.startHash.hasOwnProperty(d)&&(startValue=c.startHash[d],endValue=c.style[d],ratio=c.map((currentTime-c.startTime)/c.duration),Util.isNumber(startValue)?c.item[d]=startValue+(endValue-startValue)*ratio:startValue instanceof Point&&(x=startValue.x+(endValue.x-startValue.x)*ratio,y=startValue.y+(endValue.y-startValue.y)*ratio,c.item[d]=new Point(x,y)))}};